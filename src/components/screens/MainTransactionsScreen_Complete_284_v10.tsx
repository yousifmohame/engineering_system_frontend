/**
 * Ø§Ù„Ø´Ø§Ø´Ø© 284 - Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª v10.4 - Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø´Ø§Ù…Ù„ Ø§Ù„ÙƒØ§Ù…Ù„
 * ====================================================================
 * 
 * âœ… ØªØ­Ø¯ÙŠØ«Ø§Øª v10.4 (ØªÙˆØ³Ø¹Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„Ù…ÙƒÙˆÙ†Ø§Øª):
 * - Ø¥Ø¶Ø§ÙØ© 7 ØªØ§Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© (Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ 46 ØªØ§Ø¨Ø§Ù‹)
 * - Ù†Ø¸Ø§Ù… Ø§Ù„Ø£ÙˆØ²Ø§Ù† Ø§Ù„Ù…ØªÙ‚Ø¯Ù… (Ù…Ø¬Ù…ÙˆØ¹ 107%)
 * - Ø­Ø³Ø§Ø¨ Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø°ÙƒÙŠ
 * - ÙˆØ³Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙƒÙ…Ù†ØªÙ‡ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§ÙƒØªÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ§Ø¨Ø§Øª
 * 
 * Ø§Ù„ØªØ§Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© v10.4 (7):
 * - Ù…Ø³Ù…ÙŠØ§Øª ÙˆØ¹Ø¯Ø¯ Ø§Ù„Ø£Ø¯ÙˆØ§Ø± (Ù‚Ø±Ø§Ø¡Ø© Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©)
 * - Ø§Ù„Ø§Ø±ØªØ¯Ø§Ø¯Ø§Øª Ù…Ù† Ø§Ù„Ø£Ø±Ø¨Ø¹ Ø¬Ù‡Ø§Øª (Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±)
 * - Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±Ø§Øª Ù…ØªØ¹Ø¯Ø¯Ø© + Ø­Ø³Ø§Ø¨Ø§Øª)
 * - Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø±Ø®ØµØ© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
 * - Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚ØªØ±Ø­
 * - Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø§Ø¦Ù…
 * - Ø§Ù„Ø­Ø¯ÙˆØ¯ ÙˆØ§Ù„Ù…Ø¬Ø§ÙˆØ±ÙŠÙ† (Ù…Ø¹ Ø§Ù„ØµÙˆØ±)
 * 
 * Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª:
 * - 46 ØªØ§Ø¨Ø§Ù‹ Ø´Ø§Ù…Ù„Ø§Ù‹ (9 Ù…Ø±Ø§Ø­Ù„ Ù…Ù†Ø¸Ù…Ø©)
 * - Ù†Ø¸Ø§Ù… Ø£ÙˆØ²Ø§Ù† Ù…Ø±Ù† Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ®ØµÙŠØµ
 * - Ø­ÙØ¸ Ø­Ø§Ù„Ø© Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„ Ù„ÙƒÙ„ ØªØ§Ø¨
 * - Ø­Ø³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²
 * - ÙˆØ§Ø¬Ù‡Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© ÙƒØ§Ù…Ù„Ø©
 */

import React, { useState, useMemo } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from '../ui/card';
import { Badge } from '../ui/badge';
import { Button } from '../ui/button';
import { Progress } from '../ui/progress';
import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '../ui/table';
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter, DialogDescription } from '../ui/dialog';
import { ScrollArea } from '../ui/scroll-area';
import { 
  FileText, User, MapPin, Calendar, Clock, CheckCircle, AlertCircle,
  Edit, Save, Printer, Download, Eye, Settings, Phone, Mail,
  Building, CreditCard, Archive, History, Users, Shield, Database,
  Search, Filter, X, Plus, Send, Layers, TrendingUp, Award,
  BarChart3, FileCheck, Bell, Target, Paperclip, ExternalLink,
  ChevronDown, Home, UserPlus, FolderOpen, Stamp, FileSignature,
  Hash, RefreshCw, LucideIcon, MessageSquare, Briefcase, FileInput,
  ClipboardList, Receipt, Image as ImageIcon,
  DollarSign, Lock, Unlock, Calculator
} from 'lucide-react';
import { InputWithCopy, SelectWithCopy } from '../InputWithCopy';
import { EnhancedSwitch } from '../EnhancedSwitch';
import CodeDisplay from '../CodeDisplay';
import { safeCopyToClipboard } from '../CopyHelper';

// Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„ØªØ§Ø¨Ø§Øª Ø§Ù„Ù…Ø·ÙˆØ±Ø©
import Tab_284_02_Notifications_Complete from './Tab_284_02_Notifications_Complete';
import Tab_284_03_Owner_Data_Complete from './Tab_284_03_Owner_Data_Complete';
import Tab_284_05_Applicant_Data_Complete from './Tab_284_05_Applicant_Data_Complete';
import Tab_RequestPurpose_Brief_Complete from './Tab_RequestPurpose_Brief_Complete';
import Tab_RequestPurpose_Detailed_Complete from './Tab_RequestPurpose_Detailed_Complete';
import Tab_FloorsNaming_Complete from './Tab_FloorsNaming_Complete';
import Tab_Setbacks_AllFloors_Complete from './Tab_Setbacks_AllFloors_Complete';
import Tab_FinalComponents_Detailed_Complete from './Tab_FinalComponents_Detailed_Complete';
import Tab_Components_Generic_Complete from './Tab_Components_Generic_Complete';
import Tab_Boundaries_Neighbors_Complete from './Tab_Boundaries_Neighbors_Complete';
import Tab_LandArea_Complete from './Tab_LandArea_Complete';

// ==================== Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª ====================

interface TabConfig {
  id: string;
  number: string;
  title: string;
  icon: LucideIcon;
  defaultWeight?: number;
}

interface TabCompletionStatus {
  tabId: string;
  isCompleted: boolean;
  completedAt?: string;
  completedBy?: string;
  notes?: string;
}

interface Transaction {
  id: string;
  number: string;
  ownerName: string;
  ownerId: string;
  ownerPhone: string;
  ownerEmail: string;
  ownerAddress: string;
  planNumber: string;
  plotNumbers: string[];
  status: string;
  type: string;
  date: string;
  mainCategory: string;
  subCategory: string;
  location: {
    lat: number;
    lng: number;
    qrCode: string;
    address: string;
  };
  progress: number;
  createdBy: string;
  createdDateTime: string;
  statusReason: string;
  statusBy: string;
  statusDate: string;
  confidentialityLevel: 'Ø¹Ø§Ø¯ÙŠØ©' | 'Ø³Ø±ÙŠØ©';
  externalReferences: {
    entityName: string;
    licenseNumber: string;
    licenseYearHijri: string;
    serviceRequestNumber: string;
    serviceRequestYear: string;
    requestNumber: string;
    requestYear: string;
  }[];
  progressDetails: {
    stageName: string;
    percentage: number;
    status: string;
  }[];
  tabsCompletion: TabCompletionStatus[];
}

// ==================== ØªÙƒÙˆÙŠÙ† Ø§Ù„ØªØ§Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (39 ØªØ§Ø¨Ø§Ù‹) ====================

const TABS_CONFIG: TabConfig[] = [
  // Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (8 ØªØ§Ø¨Ø§Øª) - Ù…Ø­Ø¯Ø«Ø©
  { id: '284-01', number: '284-01', title: 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø©', icon: FileText, defaultWeight: 3 },
  { id: '284-02', number: '284-02', title: 'Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª', icon: Bell, defaultWeight: 2 },
  { id: '284-03', number: '284-03', title: 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ', icon: User, defaultWeight: 4 },
  { id: '284-04', number: '284-04', title: 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù„ÙƒÙŠØ©', icon: Building, defaultWeight: 4 },
  { id: '284-05', number: '284-05', title: 'Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù‚Ø¯Ù… Ø§Ù„Ø·Ù„Ø¨', icon: UserPlus, defaultWeight: 3 },
  { id: '284-06', number: '284-06', title: 'Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ', icon: MapPin, defaultWeight: 3 },
  { id: '284-06B', number: '284-06B', title: 'Ø§Ù„ØºØ±Ø¶ Ø§Ù„Ù…Ø®ØªØµØ± Ù…Ù† Ø§Ù„Ø·Ù„Ø¨', icon: CheckCircle, defaultWeight: 2 },
  { id: '284-06C', number: '284-06C', title: 'Ø§Ù„ØºØ±Ø¶ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ Ù…Ù† Ø§Ù„Ø·Ù„Ø¨', icon: ClipboardList, defaultWeight: 3 },
  
  // Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª ÙˆØ§Ù„ØªØ­Ù‚Ù‚ (4 ØªØ§Ø¨Ø§Øª)
  { id: '284-07', number: '284-07', title: 'Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ', icon: ClipboardList, defaultWeight: 2 },
  { id: '284-08', number: '284-08', title: 'ÙˆØ«Ø§Ø¦Ù‚ Ù…Ø³ØªÙ„Ù…Ø© Ù…Ù† Ø§Ù„Ù…Ø§Ù„Ùƒ', icon: FileInput, defaultWeight: 3 },
  { id: '284-09', number: '284-09', title: 'Ø§Ù„ØªØ­Ù‚Ù‚', icon: CheckCircle, defaultWeight: 3 },
  { id: '284-10', number: '284-10', title: 'Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙƒØªØ¨', icon: Briefcase, defaultWeight: 2 },
  
  // Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Ø§Ù„Ø¹Ù‚ÙˆØ¯ ÙˆØ§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª (5 ØªØ§Ø¨Ø§Øª) - Ø­Ø±Ø¬Ø©
  { id: '284-11', number: '284-11', title: 'Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¹Ø±', icon: DollarSign, defaultWeight: 4 },
  { id: '284-12', number: '284-12', title: 'Ø§Ù„Ø¹Ù‚Ø¯', icon: FileSignature, defaultWeight: 5 },
  { id: '284-13', number: '284-13', title: 'Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª', icon: CreditCard, defaultWeight: 4 },
  { id: '284-14', number: '284-14', title: 'Ù…Ø³ØªØ­Ù‚Ø§Øª ÙˆÙÙˆØ§ØªÙŠØ±', icon: Receipt, defaultWeight: 3 },
  { id: '284-15', number: '284-15', title: 'Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„Ø³Ø¯Ø§Ø¯', icon: FileCheck, defaultWeight: 3 },
  
  // Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Ø§Ù„Ø¬Ù‡Ø§Øª ÙˆØ§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª (7 ØªØ§Ø¨Ø§Øª)
  { id: '284-16', number: '284-16', title: 'ØµÙˆØ± ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¬Ù‡Ø§Øª', icon: ImageIcon, defaultWeight: 1 },
  { id: '284-17', number: '284-17', title: 'Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Øª', icon: Send, defaultWeight: 3 },
  { id: '284-18', number: '284-18', title: 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Øª', icon: MessageSquare, defaultWeight: 2 },
  { id: '284-19', number: '284-19', title: 'Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…', icon: Settings, defaultWeight: 3 },
  { id: '284-20', number: '284-20', title: 'Ù…Ø±Ø§Ø³Ù„Ø§Øª', icon: Mail, defaultWeight: 3 },
  { id: '284-21', number: '284-21', title: 'ØªØ¹Ù‡Ø¯Ø§Øª Ø§Ù„Ù…ÙƒØªØ¨', icon: FileSignature, defaultWeight: 3 },
  { id: '284-22', number: '284-22', title: 'ØªØ¹Ù‡Ø¯Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ', icon: FileSignature, defaultWeight: 3 },
  
  // Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5: Ø§Ù„Ø®Ø·Ø§Ø¨Ø§Øª ÙˆØ§Ù„ØªØ³Ù„ÙŠÙ…Ø§Øª (4 ØªØ§Ø¨Ø§Øª) - Ø¬Ø¯ÙŠØ¯
  { id: '284-23', number: '284-23', title: 'Ø®Ø·Ø§Ø¨Ø§Øª Ø§Ù„Ù…ÙƒØªØ¨ Ù„Ù„Ø¬Ù‡Ø§Øª', icon: Mail, defaultWeight: 3 },
  { id: '284-24', number: '284-24', title: 'Ø®Ø·Ø§Ø¨Ø§Øª Ø§Ù„Ù…ÙƒØªØ¨ Ù„Ù„Ù…Ø§Ù„Ùƒ', icon: Mail, defaultWeight: 3 },
  { id: '284-25', number: '284-25', title: 'Ù…Ù„ÙØ§Øª ØªØ³Ù„ÙŠÙ… Ù„Ù„Ø¬Ù‡Ø§Øª', icon: Send, defaultWeight: 2 },
  { id: '284-26', number: '284-26', title: 'Ù…Ù„ÙØ§Øª ØªØ³Ù„ÙŠÙ… Ù„Ù„Ù…Ø§Ù„Ùƒ', icon: Send, defaultWeight: 2 },
  
  // Ø§Ù„Ù…Ø±Ø­Ù„Ø© 6: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (4 ØªØ§Ø¨Ø§Øª) - Ø¬Ø¯ÙŠØ¯
  { id: '284-27', number: '284-27', title: 'Ø§Ù„Ù…Ù‡Ø§Ù…', icon: ClipboardList, defaultWeight: 4 },
  { id: '284-28', number: '284-28', title: 'Ø¬Ø¯ÙˆÙ„ Ø²Ù…Ù†ÙŠ Ù„Ù„Ø¥Ù†Ø¬Ø§Ø²', icon: Calendar, defaultWeight: 3 },
  { id: '284-29', number: '284-29', title: 'ÙØ±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„', icon: Users, defaultWeight: 3 },
  { id: '284-30', number: '284-30', title: 'Ù…Ø±Ø§Ø³Ù„Ø§Øª Ø¯Ø§Ø®Ù„ÙŠØ© Ø¨ÙŠÙ† ÙØ±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„', icon: MessageSquare, defaultWeight: 2 },
  
  // Ø§Ù„Ù…Ø±Ø­Ù„Ø© 7: Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ù†Ø²Ø§Ø¹Ø§Øª (3 ØªØ§Ø¨Ø§Øª) - Ø¬Ø¯ÙŠØ¯
  { id: '284-31', number: '284-31', title: 'Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±', icon: FileCheck, defaultWeight: 3 },
  { id: '284-32', number: '284-32', title: 'Ø§Ù„Ù†Ø²Ø§Ø¹Ø§Øª', icon: AlertCircle, defaultWeight: 2 },
  { id: '284-33', number: '284-33', title: 'Ø±Ø¨Ø· Ø¨Ù…Ø¹Ø§Ù…Ù„Ø© Ø£Ø®Ø±Ù‰', icon: Layers, defaultWeight: 2 },
  
  // Ø§Ù„Ù…Ø±Ø­Ù„Ø© 8: Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª ÙˆØ§Ù„Ø²ÙŠØ§Ø±Ø§Øª (6 ØªØ§Ø¨Ø§Øª) - Ø¬Ø¯ÙŠØ¯
  { id: '284-34', number: '284-34', title: 'Ù…ÙˆØ§ÙÙ‚Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ', icon: CheckCircle, defaultWeight: 3 },
  { id: '284-35', number: '284-35', title: 'Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹', icon: MapPin, defaultWeight: 2 },
  { id: '284-36', number: '284-36', title: 'ØµÙˆØ± Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹', icon: ImageIcon, defaultWeight: 2 },
  { id: '284-37', number: '284-37', title: 'Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª Ø§Ù„Ù…Ø±ØµÙˆØ¯Ø©', icon: AlertCircle, defaultWeight: 2 },
  { id: '284-38', number: '284-38', title: 'Ù…Ø³ØªØ­Ù‚Ø§Øª Ø³Ø§Ø¨Ù‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø§Ù„Ùƒ', icon: DollarSign, defaultWeight: 2 },
  { id: '284-39', number: '284-39', title: 'ÙˆØ«Ø§Ø¦Ù‚ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©', icon: Archive, defaultWeight: 3 },
  
  // Ø§Ù„Ù…Ø±Ø­Ù„Ø© 9: Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„Ù…ÙƒÙˆÙ†Ø§Øª (8 ØªØ§Ø¨Ø§Øª) - Ø¬Ø¯ÙŠØ¯ â­
  { id: '284-40', number: '284-40', title: 'Ù…Ø³Ù…ÙŠØ§Øª ÙˆØ¹Ø¯Ø¯ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±', icon: Layers, defaultWeight: 2 },
  { id: '284-41', number: '284-41', title: 'Ø§Ù„Ø§Ø±ØªØ¯Ø§Ø¯Ø§Øª Ù…Ù† Ø§Ù„Ø£Ø±Ø¨Ø¹ Ø¬Ù‡Ø§Øª', icon: Target, defaultWeight: 3 },
  { id: '284-42', number: '284-42', title: 'Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©', icon: Database, defaultWeight: 4 },
  { id: '284-43', number: '284-43', title: 'Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø±Ø®ØµØ© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©', icon: FileText, defaultWeight: 3 },
  { id: '284-44', number: '284-44', title: 'Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ù‚ØªØ±Ø­', icon: Target, defaultWeight: 3 },
  { id: '284-45', number: '284-45', title: 'Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø§Ø¦Ù…', icon: Building, defaultWeight: 3 },
  { id: '284-46', number: '284-46', title: 'Ø§Ù„Ø­Ø¯ÙˆØ¯ ÙˆØ§Ù„Ù…Ø¬Ø§ÙˆØ±ÙŠÙ†', icon: MapPin, defaultWeight: 2 },
  { id: '284-47', number: '284-47', title: 'Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø£Ø±Ø¶', icon: MapPin, defaultWeight: 3 },
];

const TOTAL_DEFAULT_WEIGHT = TABS_CONFIG.reduce((sum, tab) => sum + (tab.defaultWeight || 0), 0);

// ==================== Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ====================

const MainTransactionsScreen_Complete_284_v10: React.FC = () => {
  const [activeTab, setActiveTab] = useState('284-01');
  const [selectedTransaction, setSelectedTransaction] = useState('');
  const [searchTerm, setSearchTerm] = useState('');
  const [searchType, setSearchType] = useState<'auto' | 'number' | 'owner' | 'id' | 'plan'>('auto');
  const [filterMonth, setFilterMonth] = useState('');
  const [filterYear, setFilterYear] = useState('2025');
  const [filterTransactionType, setFilterTransactionType] = useState('');
  
  // Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
  const [showTransactionNumberDialog, setShowTransactionNumberDialog] = useState(false);
  const [showOwnerDialog, setShowOwnerDialog] = useState(false);
  const [showPlanLocationDialog, setShowPlanLocationDialog] = useState(false);
  const [showTypeDialog, setShowTypeDialog] = useState(false);
  const [showDateDialog, setShowDateDialog] = useState(false);
  const [showStatusDialog, setShowStatusDialog] = useState(false);
  const [showProgressDialog, setShowProgressDialog] = useState(false);
  
  // Ø­Ø§Ù„Ø© Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ
  const [showDigitalCertification, setShowDigitalCertification] = useState(false);
  const [selectedDocumentForCert, setSelectedDocumentForCert] = useState('');
  const [certificationType, setCertificationType] = useState('digital');
  const [certifierEmployee, setCertifierEmployee] = useState('');
  const [certificationDate, setCertificationDate] = useState(new Date().toISOString().split('T')[0]);
  const [certificationTime, setCertificationTime] = useState(new Date().toTimeString().slice(0, 5));
  const [certificationNotes, setCertificationNotes] = useState('');

  // Ø­Ø§Ù„Ø§Øª Ù†ÙˆØ§ÙØ° Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
  const [showOfficeFeesDialog, setShowOfficeFeesDialog] = useState(false);
  const [showMessageOwnerDialog, setShowMessageOwnerDialog] = useState(false);
  const [showSendFilesDialog, setShowSendFilesDialog] = useState(false);
  const [showPauseDialog, setShowPauseDialog] = useState(false);
  const [showCancelDialog, setShowCancelDialog] = useState(false);
  const [showReactivateDialog, setShowReactivateDialog] = useState(false);
  const [showCompleteTransactionDialog, setShowCompleteTransactionDialog] = useState(false);
  const [showUploadFilesDialog, setShowUploadFilesDialog] = useState(false);
  const [showTransferOwnershipDialog, setShowTransferOwnershipDialog] = useState(false);

  // Ø­Ø§Ù„Ø§Øª Ù†Ø¸Ø§Ù… Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„
  const [isEditMode, setIsEditMode] = useState<Record<string, boolean>>({});
  const [showCompletionDialog, setShowCompletionDialog] = useState(false);
  const [selectedTabForCompletion, setSelectedTabForCompletion] = useState<string | null>(null);
  const [completionNotes, setCompletionNotes] = useState('');

  // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ
  const currentUser = {
    id: 'USR-001',
    name: 'Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø£Ø­Ù…Ø¯ Ø§Ù„Ø¹Ù„ÙŠ',
    permissions: [
      'VIEW_OFFICE_FEES',
      'SEND_MESSAGES',
      'SEND_FILES',
      'HOLD_TRANSACTION',
      'CANCEL_TRANSACTION',
      'REACTIVATE_TRANSACTION',
      'COMPLETE_TRANSACTION',
      'UPLOAD_FILES',
      'TRANSFER_OWNERSHIP'
    ]
  };

  // Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª
  const transactionTypes = [
    { value: 'Ø³ÙƒÙ†ÙŠ', label: 'Ø³ÙƒÙ†ÙŠ' },
    { value: 'ØªØ¬Ø§Ø±ÙŠ', label: 'ØªØ¬Ø§Ø±ÙŠ' },
    { value: 'ØµÙ†Ø§Ø¹ÙŠ', label: 'ØµÙ†Ø§Ø¹ÙŠ' },
    { value: 'Ø²Ø±Ø§Ø¹ÙŠ', label: 'Ø²Ø±Ø§Ø¹ÙŠ' },
    { value: 'Ø¥Ø¯Ø§Ø±ÙŠ', label: 'Ø¥Ø¯Ø§Ø±ÙŠ' },
    { value: 'Ø®Ø¯Ù…ÙŠ', label: 'Ø®Ø¯Ù…ÙŠ' },
    { value: 'Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠ', label: 'Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠ' },
    { value: 'Ø³ÙŠØ§Ø­ÙŠ', label: 'Ø³ÙŠØ§Ø­ÙŠ' }
  ];

  // Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª
  const transactionStatuses: Record<string, {
    label: string;
    color: string;
    bgColor: string;
    shortDesc: string;
    detailedDesc: string;
    icon: any;
    requiresReason: boolean;
  }> = {
    'new': { 
      label: 'Ø¬Ø¯ÙŠØ¯Ø©', 
      color: '#3b82f6',
      bgColor: 'rgba(59, 130, 246, 0.1)',
      shortDesc: 'Ù…Ø¹Ø§Ù…Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©',
      detailedDesc: 'Ù…Ø¹Ø§Ù…Ù„Ø© ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§ Ø­Ø¯ÙŠØ«Ø§Ù‹ ÙˆÙ„Ù… ØªØ¨Ø¯Ø£ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨Ø¹Ø¯',
      icon: Plus,
      requiresReason: false
    },
    'in-progress': { 
      label: 'Ø¬Ø§Ø±Ù Ø§Ù„Ø¹Ù…Ù„ Ø¹Ù„ÙŠÙ‡Ø§', 
      color: '#f59e0b',
      bgColor: 'rgba(245, 158, 11, 0.1)',
      shortDesc: 'Ø¬Ø§Ø±Ù Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©',
      detailedDesc: 'Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†Ø´Ø·Ø© Ù…Ù† Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ø®ØªØµ',
      icon: Clock,
      requiresReason: false
    },
    'pending-approval': { 
      label: 'ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©', 
      color: '#eab308',
      bgColor: 'rgba(234, 179, 8, 0.1)',
      shortDesc: 'Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯',
      detailedDesc: 'Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ù…ÙƒØªÙ…Ù„Ø© ÙˆØ¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©',
      icon: AlertCircle,
      requiresReason: false
    },
    'approved': { 
      label: 'Ù…Ø¹ØªÙ…Ø¯Ø©', 
      color: '#22c55e',
      bgColor: 'rgba(34, 197, 94, 0.1)',
      shortDesc: 'ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©',
      detailedDesc: 'ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ø±Ø³Ù…ÙŠØ§Ù‹',
      icon: CheckCircle,
      requiresReason: false
    },
    'completed': { 
      label: 'Ù…ÙƒØªÙ…Ù„Ø©', 
      color: '#10b981',
      bgColor: 'rgba(16, 185, 129, 0.1)',
      shortDesc: 'Ø§ÙƒØªÙ…Ù„Øª Ø¨Ù†Ø¬Ø§Ø­',
      detailedDesc: 'Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ø§ÙƒØªÙ…Ù„Øª Ø¨Ù†Ø¬Ø§Ø­ ÙˆØªÙ… Ø¥ØºÙ„Ø§Ù‚Ù‡Ø§ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹',
      icon: Award,
      requiresReason: false
    },
    'on-hold': { 
      label: 'Ù…ØªÙˆÙ‚ÙØ© Ù…Ø¤Ù‚ØªØ§Ù‹', 
      color: '#8b5cf6',
      bgColor: 'rgba(139, 92, 246, 0.1)',
      shortDesc: 'Ù…ÙˆÙ‚ÙˆÙØ© Ù…Ø¤Ù‚ØªØ§Ù‹',
      detailedDesc: 'Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ù…ÙˆÙ‚ÙˆÙØ© Ù…Ø¤Ù‚ØªØ§Ù‹ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©',
      icon: Layers,
      requiresReason: true
    },
    'cancelled': { 
      label: 'Ù…Ù„ØºØ§Ø©', 
      color: '#6b7280',
      bgColor: 'rgba(107, 114, 128, 0.1)',
      shortDesc: 'ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡',
      detailedDesc: 'Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ØªÙ… Ø¥Ù„ØºØ§Ø¤Ù‡Ø§ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹',
      icon: X,
      requiresReason: true
    },
    'rejected': { 
      label: 'Ù…Ø±ÙÙˆØ¶Ø©', 
      color: '#ef4444',
      bgColor: 'rgba(239, 68, 68, 0.1)',
      shortDesc: 'ØªÙ… Ø§Ù„Ø±ÙØ¶',
      detailedDesc: 'Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ØªÙ… Ø±ÙØ¶Ù‡Ø§ Ø±Ø³Ù…ÙŠØ§Ù‹',
      icon: AlertCircle,
      requiresReason: true
    },
    'under-review': { 
      label: 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©', 
      color: '#06b6d4',
      bgColor: 'rgba(6, 182, 212, 0.1)',
      shortDesc: 'ØªØ­Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©',
      detailedDesc: 'Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ÙÙ†ÙŠØ© ÙˆØ§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©',
      icon: Eye,
      requiresReason: false
    },
    'returned': { 
      label: 'Ù…Ø¹Ø§Ø¯Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„', 
      color: '#f97316',
      bgColor: 'rgba(249, 115, 22, 0.1)',
      shortDesc: 'ØªØ­ØªØ§Ø¬ ØªØ¹Ø¯ÙŠÙ„',
      detailedDesc: 'Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ù…Ø¹Ø§Ø¯Ø© Ù„Ù„Ù…Ø§Ù„Ùƒ Ù„Ø¥Ø¬Ø±Ø§Ø¡ ØªØ¹Ø¯ÙŠÙ„Ø§Øª',
      icon: Edit,
      requiresReason: true
    }
  };

  // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„ÙˆÙ‡Ù…ÙŠØ©
  const mockTransactions: Transaction[] = [
    { 
      id: '2501001', 
      number: '2501001', 
      ownerName: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³Ø§Ù„Ù…', 
      ownerId: '1234567890',
      ownerPhone: '0501234567',
      ownerEmail: 'ahmed.salem@email.com',
      ownerAddress: 'Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø­ÙŠ Ø§Ù„Ù†Ø±Ø¬Ø³ØŒ Ø´Ø§Ø±Ø¹ Ø§Ù„Ø£Ù…ÙŠØ± Ø³Ù„Ø·Ø§Ù†',
      planNumber: 'PLN-123',
      plotNumbers: ['425', '426'],
      status: 'in-progress', 
      type: 'Ø³ÙƒÙ†ÙŠ', 
      date: '2025-01-15',
      mainCategory: 'Ù…Ø¨Ø§Ù†ÙŠ Ø³ÙƒÙ†ÙŠØ©',
      subCategory: 'ÙÙŠÙ„Ø§ Ø®Ø§ØµØ©',
      location: {
        lat: 24.7136,
        lng: 46.6753,
        qrCode: 'https://maps.google.com/?q=24.7136,46.6753',
        address: 'Ø§Ù„Ø±ÙŠØ§Ø¶ØŒ Ø­ÙŠ Ø§Ù„Ù†Ø±Ø¬Ø³'
      },
      progress: 65,
      createdBy: 'Ù…. Ø³Ø§Ø±Ø© Ø§Ù„Ø£Ø­Ù…Ø¯',
      createdDateTime: '2025-01-15 09:30',
      statusReason: '',
      statusBy: 'Ù…. Ø£Ø­Ù…Ø¯ Ø§Ù„Ø³Ø§Ù„Ù…',
      statusDate: '2025-01-16',
      confidentialityLevel: 'Ø¹Ø§Ø¯ÙŠØ©',
      externalReferences: [
        {
          entityName: 'Ø£Ù…Ø§Ù†Ø© Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø±ÙŠØ§Ø¶',
          licenseNumber: 'RUH-2024-0156',
          licenseYearHijri: '1446',
          serviceRequestNumber: 'SR-2501-0023',
          serviceRequestYear: '2025',
          requestNumber: 'REQ-25-001',
          requestYear: '2025'
        }
      ],
      progressDetails: [
        { stageName: 'Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ø£Ø±Ø¶', percentage: 100, status: 'Ù…ÙƒØªÙ…Ù„' },
        { stageName: 'Ø§Ù„Ø±Ø³ÙˆÙ…Ø§Øª', percentage: 85, status: 'Ø¬Ø§Ø±Ù' },
        { stageName: 'Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª', percentage: 45, status: 'Ø¬Ø§Ø±Ù' },
        { stageName: 'Ø§Ù„ØªÙ†ÙÙŠØ°', percentage: 0, status: 'Ù‚Ø§Ø¯Ù…' }
      ],
      tabsCompletion: [
        { tabId: '284-01', isCompleted: true, completedAt: '2025-01-15 10:00', completedBy: 'Ù…. Ø³Ø§Ø±Ø© Ø§Ù„Ø£Ø­Ù…Ø¯' },
        { tabId: '284-03', isCompleted: true, completedAt: '2025-01-15 11:00', completedBy: 'Ù…. Ø³Ø§Ø±Ø© Ø§Ù„Ø£Ø­Ù…Ø¯' }
      ]
    },
    { 
      id: '2501002', 
      number: '2501002', 
      ownerName: 'ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ Ø§Ù„Ù‚Ø­Ø·Ø§Ù†ÙŠ', 
      ownerId: '2345678901',
      ownerPhone: '0502345678',
      ownerEmail: 'fatima.qhtani@email.com',
      ownerAddress: 'Ø¬Ø¯Ø©ØŒ Ø­ÙŠ Ø§Ù„Ø²Ù‡Ø±Ø§Ø¡ØŒ Ø´Ø§Ø±Ø¹ Ø§Ù„ØªØ­Ù„ÙŠØ©',
      planNumber: 'PLN-456',
      plotNumbers: ['789', '790', '791'],
      status: 'new', 
      type: 'ØªØ¬Ø§Ø±ÙŠ', 
      date: '2025-01-20',
      mainCategory: 'Ù…Ø¨Ø§Ù†ÙŠ ØªØ¬Ø§Ø±ÙŠØ©',
      subCategory: 'Ù…Ø¬Ù…Ø¹ ØªØ¬Ø§Ø±ÙŠ',
      location: {
        lat: 21.5433,
        lng: 39.1728,
        qrCode: 'https://maps.google.com/?q=21.5433,39.1728',
        address: 'Ø¬Ø¯Ø©ØŒ Ø­ÙŠ Ø§Ù„Ø²Ù‡Ø±Ø§Ø¡'
      },
      progress: 15,
      createdBy: 'Ù…. Ø®Ø§Ù„Ø¯ Ø§Ù„Ù…Ø­Ù…Ø¯ÙŠ',
      createdDateTime: '2025-01-20 14:15',
      statusReason: '',
      statusBy: 'Ù…. Ø®Ø§Ù„Ø¯ Ø§Ù„Ù…Ø­Ù…Ø¯ÙŠ',
      statusDate: '2025-01-20',
      confidentialityLevel: 'Ø¹Ø§Ø¯ÙŠØ©',
      externalReferences: [
        {
          entityName: 'Ø£Ù…Ø§Ù†Ø© Ù…Ø­Ø§ÙØ¸Ø© Ø¬Ø¯Ø©',
          licenseNumber: 'JED-2025-0089',
          licenseYearHijri: '1446',
          serviceRequestNumber: 'SR-2501-0067',
          serviceRequestYear: '2025',
          requestNumber: 'REQ-25-002',
          requestYear: '2025'
        }
      ],
      progressDetails: [
        { stageName: 'Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ø£Ø±Ø¶', percentage: 60, status: 'Ø¬Ø§Ø±Ù' },
        { stageName: 'Ø§Ù„Ø±Ø³ÙˆÙ…Ø§Øª', percentage: 0, status: 'Ù‚Ø§Ø¯Ù…' },
        { stageName: 'Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª', percentage: 0, status: 'Ù‚Ø§Ø¯Ù…' },
        { stageName: 'Ø§Ù„ØªÙ†ÙÙŠØ°', percentage: 0, status: 'Ù‚Ø§Ø¯Ù…' }
      ],
      tabsCompletion: [
        { tabId: '284-01', isCompleted: true, completedAt: '2025-01-20 15:00', completedBy: 'Ù…. Ø®Ø§Ù„Ø¯ Ø§Ù„Ù…Ø­Ù…Ø¯ÙŠ' }
      ]
    },
    { 
      id: '2412045', 
      number: '2412045', 
      ownerName: 'Ù…Ø­Ù…Ø¯ Ø³Ø¹Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ', 
      ownerId: '3456789012',
      ownerPhone: '0503456789',
      ownerEmail: 'mohammed.otaibi@email.com',
      ownerAddress: 'Ø§Ù„Ø¯Ù…Ø§Ù…ØŒ Ø­ÙŠ Ø§Ù„Ø´Ø§Ø·Ø¦ØŒ Ø´Ø§Ø±Ø¹ Ø§Ù„Ù…Ù„Ùƒ Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ²',
      planNumber: 'PLN-789',
      plotNumbers: ['1234'],
      status: 'completed', 
      type: 'Ø³ÙƒÙ†ÙŠ', 
      date: '2024-12-10',
      mainCategory: 'Ù…Ø¨Ø§Ù†ÙŠ Ø³ÙƒÙ†ÙŠØ©',
      subCategory: 'Ø¹Ù…Ø§Ø±Ø© Ø³ÙƒÙ†ÙŠØ©',
      location: {
        lat: 26.3927,
        lng: 49.9777,
        qrCode: 'https://maps.google.com/?q=26.3927,49.9777',
        address: 'Ø§Ù„Ø¯Ù…Ø§Ù…ØŒ Ø­ÙŠ Ø§Ù„Ø´Ø§Ø·Ø¦'
      },
      progress: 100,
      createdBy: 'Ù…. Ù†ÙˆØ±Ø© Ø§Ù„Ø¹Ù…Ø±ÙŠ',
      createdDateTime: '2024-12-10 10:00',
      statusReason: '',
      statusBy: 'Ù…. Ø£Ø­Ù…Ø¯ Ø§Ù„Ø³Ø§Ù„Ù…',
      statusDate: '2025-01-10',
      confidentialityLevel: 'Ø¹Ø§Ø¯ÙŠØ©',
      externalReferences: [
        {
          entityName: 'Ø£Ù…Ø§Ù†Ø© Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©',
          licenseNumber: 'DMM-2024-0234',
          licenseYearHijri: '1446',
          serviceRequestNumber: 'SR-2412-0145',
          serviceRequestYear: '2024',
          requestNumber: 'REQ-24-045',
          requestYear: '2024'
        }
      ],
      progressDetails: [
        { stageName: 'Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ø£Ø±Ø¶', percentage: 100, status: 'Ù…ÙƒØªÙ…Ù„' },
        { stageName: 'Ø§Ù„Ø±Ø³ÙˆÙ…Ø§Øª', percentage: 100, status: 'Ù…ÙƒØªÙ…Ù„' },
        { stageName: 'Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª', percentage: 100, status: 'Ù…ÙƒØªÙ…Ù„' },
        { stageName: 'Ø§Ù„ØªÙ†ÙÙŠØ°', percentage: 100, status: 'Ù…ÙƒØªÙ…Ù„' }
      ],
      tabsCompletion: []
    },
    { 
      id: '2502001', 
      number: '2502001', 
      ownerName: 'Ø³Ø§Ø±Ø© Ø­Ø³Ù† Ø§Ù„Ø£Ø­Ù…Ø¯', 
      ownerId: '4567890123',
      ownerPhone: '0504567890',
      ownerEmail: 'sarah.ahmed@email.com',
      ownerAddress: 'Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©ØŒ Ø­ÙŠ Ø§Ù„Ø¹Ø²ÙŠØ²ÙŠØ©ØŒ Ø´Ø§Ø±Ø¹ Ø§Ù„Ø­Ø¬',
      planNumber: 'PLN-321',
      plotNumbers: ['567', '568'],
      status: 'on-hold', 
      type: 'Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠ', 
      date: '2025-02-05',
      mainCategory: 'Ù…Ø¨Ø§Ù†ÙŠ Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ©',
      subCategory: 'Ø¨Ø±Ø¬ Ø³ÙƒÙ†ÙŠ ØªØ¬Ø§Ø±ÙŠ',
      location: {
        lat: 21.3891,
        lng: 39.8579,
        qrCode: 'https://maps.google.com/?q=21.3891,39.8579',
        address: 'Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©ØŒ Ø­ÙŠ Ø§Ù„Ø¹Ø²ÙŠØ²ÙŠØ©'
      },
      progress: 42,
      createdBy: 'Ù…. Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ',
      createdDateTime: '2025-02-05 11:20',
      statusReason: 'ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø¯ÙØ§Ø¹ Ø§Ù„Ù…Ø¯Ù†ÙŠ',
      statusBy: 'Ù…. ÙÙ‡Ø¯ Ø§Ù„ØºØ§Ù…Ø¯ÙŠ',
      statusDate: '2025-02-12',
      confidentialityLevel: 'Ø³Ø±ÙŠØ©',
      externalReferences: [
        {
          entityName: 'Ø£Ù…Ø§Ù†Ø© Ø§Ù„Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ù…Ù‚Ø¯Ø³Ø©',
          licenseNumber: 'MKK-2025-0012',
          licenseYearHijri: '1446',
          serviceRequestNumber: 'SR-2502-0008',
          serviceRequestYear: '2025',
          requestNumber: 'REQ-25-003',
          requestYear: '2025'
        }
      ],
      progressDetails: [
        { stageName: 'Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ø£Ø±Ø¶', percentage: 100, status: 'Ù…ÙƒØªÙ…Ù„' },
        { stageName: 'Ø§Ù„Ø±Ø³ÙˆÙ…Ø§Øª', percentage: 70, status: 'Ø¬Ø§Ø±Ù' },
        { stageName: 'Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª', percentage: 30, status: 'Ù…ØªÙˆÙ‚Ù' },
        { stageName: 'Ø§Ù„ØªÙ†ÙÙŠØ°', percentage: 0, status: 'Ù‚Ø§Ø¯Ù…' }
      ],
      tabsCompletion: [
        { tabId: '284-01', isCompleted: true, completedAt: '2025-02-05 12:00', completedBy: 'Ù…. Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ' },
        { tabId: '284-03', isCompleted: true, completedAt: '2025-02-06 09:00', completedBy: 'Ù…. Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ' },
        { tabId: '284-04', isCompleted: true, completedAt: '2025-02-07 10:30', completedBy: 'Ù…. Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ' }
      ]
    },
    { 
      id: '2501003', 
      number: '2501003', 
      ownerName: 'Ø®Ø§Ù„Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ', 
      ownerId: '5678901234',
      ownerPhone: '0505678901',
      ownerEmail: 'khaled.mutairi@email.com',
      ownerAddress: 'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©ØŒ Ø­ÙŠ Ù‚Ø¨Ø§Ø¡ØŒ Ø´Ø§Ø±Ø¹ Ø³ÙŠØ¯ Ø§Ù„Ø´Ù‡Ø¯Ø§Ø¡',
      planNumber: 'PLN-654',
      plotNumbers: ['999', '1000', '1001', '1002'],
      status: 'approved', 
      type: 'ØµÙ†Ø§Ø¹ÙŠ', 
      date: '2025-01-25',
      mainCategory: 'Ù…Ø¨Ø§Ù†ÙŠ ØµÙ†Ø§Ø¹ÙŠØ©',
      subCategory: 'Ù…ØµÙ†Ø¹ Ø¥Ù†ØªØ§Ø¬ÙŠ',
      location: {
        lat: 24.4672,
        lng: 39.6112,
        qrCode: 'https://maps.google.com/?q=24.4672,39.6112',
        address: 'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©ØŒ Ø­ÙŠ Ù‚Ø¨Ø§Ø¡'
      },
      progress: 88,
      createdBy: 'Ù…. Ø±ÙŠÙ… Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ',
      createdDateTime: '2025-01-25 08:45',
      statusReason: '',
      statusBy: 'Ù…. Ø£Ø­Ù…Ø¯ Ø§Ù„Ø³Ø§Ù„Ù…',
      statusDate: '2025-02-15',
      confidentialityLevel: 'Ø¹Ø§Ø¯ÙŠØ©',
      externalReferences: [
        {
          entityName: 'Ø£Ù…Ø§Ù†Ø© Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©',
          licenseNumber: 'MED-2025-0034',
          licenseYearHijri: '1446',
          serviceRequestNumber: 'SR-2501-0078',
          serviceRequestYear: '2025',
          requestNumber: 'REQ-25-004',
          requestYear: '2025'
        }
      ],
      progressDetails: [
        { stageName: 'Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ø£Ø±Ø¶', percentage: 100, status: 'Ù…ÙƒØªÙ…Ù„' },
        { stageName: 'Ø§Ù„Ø±Ø³ÙˆÙ…Ø§Øª', percentage: 100, status: 'Ù…ÙƒØªÙ…Ù„' },
        { stageName: 'Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª', percentage: 90, status: 'Ø¬Ø§Ø±Ù' },
        { stageName: 'Ø§Ù„ØªÙ†ÙÙŠØ°', percentage: 60, status: 'Ø¬Ø§Ø±Ù' }
      ],
      tabsCompletion: [
        { tabId: '284-01', isCompleted: true, completedAt: '2025-01-25 09:30', completedBy: 'Ù…. Ø±ÙŠÙ… Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ' },
        { tabId: '284-03', isCompleted: true, completedAt: '2025-01-26 10:00', completedBy: 'Ù…. Ø±ÙŠÙ… Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ' },
        { tabId: '284-04', isCompleted: true, completedAt: '2025-01-27 11:15', completedBy: 'Ù…. Ø±ÙŠÙ… Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ' },
        { tabId: '284-11', isCompleted: true, completedAt: '2025-02-01 14:00', completedBy: 'Ù…. Ø±ÙŠÙ… Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ' },
        { tabId: '284-12', isCompleted: true, completedAt: '2025-02-03 15:30', completedBy: 'Ù…. Ø±ÙŠÙ… Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ' }
      ]
    }
  ];

  // Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„ÙˆÙ‡Ù…ÙŠØ© Ù„Ù„ØªÙˆØ«ÙŠÙ‚
  const transactionDocuments = [
    { id: 'DOC-001', name: 'ØµÙƒ Ø§Ù„Ù…Ù„ÙƒÙŠØ©', category: 'Ù…Ù„ÙƒÙŠØ©', certified: true },
    { id: 'DOC-002', name: 'Ø§Ù„Ù…Ø®Ø·Ø· Ø§Ù„Ù…Ø³Ø§Ø­ÙŠ', category: 'Ù…Ø³Ø§Ø­Ø©', certified: false },
    { id: 'DOC-003', name: 'Ø¹Ù‚Ø¯ Ø§Ù„Ø§ØªÙØ§Ù‚', category: 'Ø¹Ù‚ÙˆØ¯', certified: true },
    { id: 'DOC-004', name: 'Ù‡ÙˆÙŠØ© Ø§Ù„Ù…Ø§Ù„Ùƒ', category: 'Ù‡ÙˆÙŠØ§Øª', certified: false },
    { id: 'DOC-005', name: 'Ø§Ù„ØªØ±Ø®ÙŠØµ Ø§Ù„Ø¨Ù„Ø¯ÙŠ', category: 'ØªØ±Ø§Ø®ÙŠØµ', certified: false },
    { id: 'DOC-006', name: 'Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©', category: 'Ù…ÙˆØ§ÙÙ‚Ø§Øª', certified: true },
    { id: 'DOC-007', name: 'Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙÙ†ÙŠ', category: 'ØªÙ‚Ø§Ø±ÙŠØ±', certified: false },
    { id: 'DOC-008', name: 'Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ø¯ÙØ¹', category: 'Ù…Ø§Ù„ÙŠØ©', certified: true }
  ];

  // Ø§Ù„Ù…ÙˆØ¸ÙÙˆÙ† Ø§Ù„Ù…Ø®ÙˆÙ„ÙˆÙ† Ø¨Ø§Ù„ØªØµØ¯ÙŠÙ‚
  const certifierEmployees = [
    { value: 'EMP-001', label: 'Ù…. Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³Ø§Ù„Ù… - Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹' },
    { value: 'EMP-002', label: 'Ø¯. ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ Ø§Ù„Ù‚Ø­Ø·Ø§Ù†ÙŠ - Ù…Ø¯ÙŠØ± Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬ÙˆØ¯Ø©' },
    { value: 'EMP-003', label: 'Ù…. Ø®Ø§Ù„Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ù…Ø­Ù…Ø¯ÙŠ - Ø±Ø¦ÙŠØ³ Ù‚Ø³Ù… Ø§Ù„ØªÙˆØ«ÙŠÙ‚' },
    { value: 'EMP-004', label: 'Ø£. Ø³Ø§Ø±Ø© Ø­Ø³Ù† Ø§Ù„Ø£Ø­Ù…Ø¯ - Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„' },
    { value: 'EMP-005', label: 'Ù…. Ù…Ø­Ù…Ø¯ Ø³Ø¹Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ - Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ' }
  ];

  // Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
  const parseTransactionNumber = (number: string) => {
    const year = number.substring(0, 2);
    const month = number.substring(2, 4);
    const sequence = number.substring(4);
    
    const monthNames: Record<string, string> = {
      '01': 'ÙŠÙ†Ø§ÙŠØ±', '02': 'ÙØ¨Ø±Ø§ÙŠØ±', '03': 'Ù…Ø§Ø±Ø³', '04': 'Ø£Ø¨Ø±ÙŠÙ„',
      '05': 'Ù…Ø§ÙŠÙˆ', '06': 'ÙŠÙˆÙ†ÙŠÙˆ', '07': 'ÙŠÙˆÙ„ÙŠÙˆ', '08': 'Ø£ØºØ³Ø·Ø³',
      '09': 'Ø³Ø¨ØªÙ…Ø¨Ø±', '10': 'Ø£ÙƒØªÙˆØ¨Ø±', '11': 'Ù†ÙˆÙÙ…Ø¨Ø±', '12': 'Ø¯ÙŠØ³Ù…Ø¨Ø±'
    };
    
    return {
      year,
      yearFull: `20${year}`,
      month,
      monthName: monthNames[month] || month,
      sequence
    };
  };

  const formatTransactionLabel = (t: Transaction) => {
    return `${t.number} â€¢ ${t.ownerName} â€¢ ${t.type}`;
  };

  const detectSearchType = (term: string): typeof searchType => {
    if (!term) return 'auto';
    if (/^\d{7}$/.test(term)) return 'number';
    if (/^\d{10}$/.test(term)) return 'id';
    if (/^PLN-/i.test(term)) return 'plan';
    return 'owner';
  };

  const detectedSearchType = detectSearchType(searchTerm);

  const filteredTransactions = mockTransactions.filter(t => {
    const matchesSearch = !searchTerm || 
      t.number.includes(searchTerm) ||
      t.ownerName.includes(searchTerm) ||
      t.ownerId?.includes(searchTerm) ||
      t.planNumber?.includes(searchTerm);
    
    const matchesType = !filterTransactionType || t.type === filterTransactionType;
    const matchesYear = !filterYear || t.number.substring(0, 2) === filterYear.substring(2);
    const matchesMonth = !filterMonth || t.number.substring(2, 4) === filterMonth;
    
    return matchesSearch && matchesType && matchesYear && matchesMonth;
  });

  const selectedTransactionData = mockTransactions.find(t => t.id === selectedTransaction);
  const currentTransaction = selectedTransactionData || mockTransactions[0];

  // ÙˆØ¸Ø§Ø¦Ù Ù†Ø¸Ø§Ù… Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„
  const isTabCompleted = (tabId: string): boolean => {
    return currentTransaction.tabsCompletion?.some(tc => tc.tabId === tabId && tc.isCompleted) || false;
  };

  const isTabEditable = (tabId: string): boolean => {
    return !isTabCompleted(tabId) || isEditMode[tabId] || false;
  };

  const toggleEditMode = (tabId: string) => {
    setIsEditMode(prev => ({ ...prev, [tabId]: !prev[tabId] }));
  };

  const openCompletionDialog = (tabId: string) => {
    setSelectedTabForCompletion(tabId);
    setShowCompletionDialog(true);
  };

  const handleSaveCompletion = () => {
    if (selectedTabForCompletion) {
      console.log('Ø¥ØªÙ…Ø§Ù… Ø§Ù„ØªØ§Ø¨:', selectedTabForCompletion, 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª:', completionNotes);
      setShowCompletionDialog(false);
      setCompletionNotes('');
      setSelectedTabForCompletion(null);
    }
  };

  const handleSaveCertification = () => {
    if (!selectedDocumentForCert || !certificationType || !certifierEmployee) {
      alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
      return;
    }

    const certificationData = {
      document: selectedDocumentForCert,
      type: certificationType,
      employee: certifierEmployee,
      date: certificationDate,
      time: certificationTime,
      notes: certificationNotes
    };

    console.log('Ø­ÙØ¸ Ø§Ù„ØªÙˆØ«ÙŠÙ‚:', certificationData);
    alert(`âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­!\n\nØ§Ù„Ù…Ø³ØªÙ†Ø¯: ${transactionDocuments.find(d => d.id === selectedDocumentForCert)?.name}\nØ§Ù„Ù†ÙˆØ¹: ${certificationType}\nØ§Ù„Ù…ÙˆØ¸Ù: ${certifierEmployee}\nØ§Ù„ØªØ§Ø±ÙŠØ®: ${certificationDate} ${certificationTime}`);
    
    setSelectedDocumentForCert('');
    setCertificationType('digital');
    setCertifierEmployee('');
    setCertificationNotes('');
    setShowDigitalCertification(false);
  };

  const handlePrintCertification = () => {
    if (!selectedDocumentForCert) {
      alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø³ØªÙ†Ø¯ Ø£ÙˆÙ„Ø§Ù‹');
      return;
    }
    alert('ğŸ–¨ï¸ Ø¬Ø§Ø±Ù Ø·Ø¨Ø§Ø¹Ø© Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ«ÙŠÙ‚...');
  };

  // Ø±Ù†Ø¯Ø± Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ§Ø¨
  const renderTabContent = () => {
    if (!currentTransaction) {
      return (
        <div className="flex items-center justify-center" style={{ minHeight: 'calc(100vh - 280px)' }}>
          <Card className="max-w-2xl w-full card-rtl" style={{ background: 'linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%)' }}>
            <CardContent className="p-12 text-center">
              <FileText className="h-24 w-24 mx-auto text-blue-400 mb-4" />
              <h3 className="text-xl mb-2" style={{ fontFamily: 'Tajawal, sans-serif', color: '#1e40af' }}>
                Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¹Ø§Ù…Ù„Ø©
              </h3>
              <p className="text-gray-600" style={{ fontFamily: 'Tajawal, sans-serif' }}>
                Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¹Ø§Ù…Ù„Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø£Ø¹Ù„Ø§Ù‡ Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
              </p>
            </CardContent>
          </Card>
        </div>
      );
    }

    const isCompleted = isTabCompleted(activeTab);
    const isEditable = isTabEditable(activeTab);
    const currentTabConfig = TABS_CONFIG.find(t => t.id === activeTab);

    // Ù…Ø­ØªÙˆÙ‰ Ø®Ø§Øµ Ø¨ØªØ§Ø¨ "Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø§Ù…Ø©" (284-01)
    if (activeTab === '284-01') {
      return (
        <div className="space-y-4">
          {/* Ø´Ø±ÙŠØ· Ø­Ø§Ù„Ø© Ø§Ù„ØªØ§Ø¨ */}
          <Card className="card-rtl" style={{ 
            background: isCompleted 
              ? 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)' 
              : 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)',
            border: `2px solid ${isCompleted ? '#10b981' : '#f59e0b'}`
          }}>
            <CardContent className="p-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-3">
                  {isCompleted ? (
                    <CheckCircle className="h-6 w-6 text-green-600" />
                  ) : (
                    <Clock className="h-6 w-6 text-yellow-600" />
                  )}
                  <div>
                    <h3 style={{ fontFamily: 'Tajawal, sans-serif', fontSize: '16px', fontWeight: 700, color: isCompleted ? '#065f46' : '#92400e' }}>
                      {isCompleted ? 'ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø¨' : 'Ø§Ù„ØªØ§Ø¨ Ù‚ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„'}
                    </h3>
                    <p style={{ fontFamily: 'Tajawal, sans-serif', fontSize: '12px', color: isCompleted ? '#059669' : '#b45309' }}>
                      {isCompleted 
                        ? `Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ù†Ø³Ø¨ÙŠ: ${currentTabConfig?.defaultWeight}% â€¢ Ù…ÙƒØªÙ…Ù„`
                        : `Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ù†Ø³Ø¨ÙŠ: ${currentTabConfig?.defaultWeight}% â€¢ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„`
                      }
                    </p>
                  </div>
                </div>
                
                <div className="flex gap-2">
                  {isCompleted && !isEditMode[activeTab] && (
                    <Button 
                      size="sm" 
                      onClick={() => toggleEditMode(activeTab)}
                      className="gap-2"
                      style={{ background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)' }}
                    >
                      <Unlock className="h-4 w-4" />
                      Ø§Ø³ØªÙƒÙ…Ø§Ù„
                    </Button>
                  )}
                  
                  {isEditable && !isCompleted && (
                    <Button 
                      size="sm" 
                      onClick={() => openCompletionDialog(activeTab)}
                      className="gap-2"
                      style={{ background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)' }}
                    >
                      <Lock className="h-4 w-4" />
                      ÙˆØ³Ù… ÙƒÙ…ÙƒØªÙ…Ù„
                    </Button>
                  )}
                </div>
              </div>
            </CardContent>
          </Card>

          {/* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø«Ù…Ø§Ù†ÙŠØ© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© */}
          <div className="grid grid-cols-8 gap-1.5 px-[-17px] py-[0px] mt-[-8px] mr-[36px] mb-[2px] ml-[0px]">
            {/* 1. Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© - ØªÙØ§Ø¹Ù„ÙŠ */}
            <Card 
              className="card-element card-rtl cursor-pointer hover:shadow-lg transition-all"
              onClick={() => setShowTransactionNumberDialog(true)}
              style={{ 
                border: '2px solid #93c5fd',
                background: 'linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)'
              }}
            >
              <CardContent className="p-1 text-center">
                <FileText className="h-3.5 w-3.5 mx-auto text-blue-600 mb-0.5" />
                <p className="text-xs font-mono mb-0" style={{ fontFamily: 'Courier New', color: '#1e40af' }}>
                  {currentTransaction.number}
                </p>
                <p className="text-[9px] text-gray-500" style={{ fontFamily: 'Tajawal, sans-serif' }}>
                  Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
                </p>
              </CardContent>
            </Card>

            {/* 2. Ø§Ù„Ù…Ø§Ù„Ùƒ - ØªÙØ§Ø¹Ù„ÙŠ */}
            <Card 
              className="card-element card-rtl cursor-pointer hover:shadow-lg transition-all"
              onClick={() => setShowOwnerDialog(true)}
              style={{ 
                border: '2px solid #6ee7b7', 
                background: 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)' 
              }}
            >
              <CardContent className="p-1 text-center">
                <User className="h-3.5 w-3.5 mx-auto text-green-600 mb-0.5" />
                <p className="text-xs mb-0" style={{ fontFamily: 'Tajawal, sans-serif', color: '#065f46' }}>
                  {currentTransaction.ownerName}
                </p>
                <p className="text-[9px] text-gray-500" style={{ fontFamily: 'Tajawal, sans-serif' }}>
                  Ø§Ù„Ù…Ø§Ù„Ùƒ
                </p>
              </CardContent>
            </Card>

            {/* 3. Ø±Ù‚Ù… Ø§Ù„Ù…Ø®Ø·Ø· - ØªÙØ§Ø¹Ù„ÙŠ */}
            <Card 
              className="card-element card-rtl cursor-pointer hover:shadow-lg transition-all"
              onClick={() => setShowPlanLocationDialog(true)}
              style={{ 
                border: '2px solid #c4b5fd',
                background: 'linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%)'
              }}
            >
              <CardContent className="p-1 text-center">
                <MapPin className="h-3.5 w-3.5 mx-auto text-purple-600 mb-0.5" />
                <p className="text-xs mb-0" style={{ fontFamily: 'Courier New', color: '#6b21a8' }}>
                  {currentTransaction.planNumber}
                </p>
                <p className="text-[9px] text-gray-500" style={{ fontFamily: 'Tajawal, sans-serif' }}>
                  ({currentTransaction.plotNumbers?.length || 0} Ù‚Ø·Ø¹)
                </p>
              </CardContent>
            </Card>

            {/* 4. Ø§Ù„Ù†ÙˆØ¹ - ØªÙØ§Ø¹Ù„ÙŠ */}
            <Card 
              className="card-element card-rtl cursor-pointer hover:shadow-lg transition-all"
              onClick={() => setShowTypeDialog(true)}
              style={{ 
                border: '2px solid #fdba74',
                background: 'linear-gradient(135deg, #fed7aa 0%, #fdba74 100%)'
              }}
            >
              <CardContent className="p-0.5 text-center">
                <Building className="h-2.5 w-2.5 mx-auto text-orange-600 mb-0" />
                <p className="text-xs mb-0" style={{ fontFamily: 'Tajawal, sans-serif', color: '#9a3412' }}>
                  {currentTransaction.type}
                </p>
                <p className="text-[9px] text-gray-500" style={{ fontFamily: 'Tajawal, sans-serif' }}>
                  Ø§Ù„Ù†ÙˆØ¹
                </p>
              </CardContent>
            </Card>

            {/* 5. Ø§Ù„ØªØ§Ø±ÙŠØ® - ØªÙØ§Ø¹Ù„ÙŠ */}
            <Card 
              className="card-element card-rtl cursor-pointer hover:shadow-lg transition-all"
              onClick={() => setShowDateDialog(true)}
              style={{ 
                border: '2px solid #f9a8d4',
                background: 'linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)'
              }}
            >
              <CardContent className="p-1 text-center">
                <Calendar className="h-3.5 w-3.5 mx-auto text-pink-600 mb-0.5" />
                <p className="text-xs mb-0" style={{ fontFamily: 'Courier New', color: '#9f1239' }}>
                  {currentTransaction.date}
                </p>
                <p className="text-[9px] text-gray-500" style={{ fontFamily: 'Tajawal, sans-serif' }}>
                  ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡
                </p>
              </CardContent>
            </Card>

            {/* 6. Ø§Ù„Ø­Ø§Ù„Ø© - ØªÙØ§Ø¹Ù„ÙŠ */}
            <Card 
              className="card-element card-rtl cursor-pointer hover:shadow-lg transition-all"
              onClick={() => setShowStatusDialog(true)}
              style={{ 
                border: `2px solid ${transactionStatuses[currentTransaction.status]?.color || '#6b7280'}`,
                background: transactionStatuses[currentTransaction.status]?.bgColor || 'rgba(107, 114, 128, 0.1)'
              }}
            >
              <CardContent className="p-1 text-center">
                {React.createElement(transactionStatuses[currentTransaction.status]?.icon || AlertCircle, {
                  className: "h-3.5 w-3.5 mx-auto mb-0.5",
                  style: { color: transactionStatuses[currentTransaction.status]?.color || '#6b7280' }
                })}
                <p className="text-xs mb-0" style={{ fontFamily: 'Tajawal, sans-serif', color: transactionStatuses[currentTransaction.status]?.color || '#6b7280' }}>
                  {transactionStatuses[currentTransaction.status]?.label || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}
                </p>
                <p className="text-[9px] text-gray-500" style={{ fontFamily: 'Tajawal, sans-serif' }}>
                  Ø§Ù„Ø­Ø§Ù„Ø©
                </p>
              </CardContent>
            </Card>

            {/* 7. Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ - ØªÙØ§Ø¹Ù„ÙŠ */}
            <Card 
              className="card-element card-rtl cursor-pointer hover:shadow-lg transition-all"
              onClick={() => setShowPlanLocationDialog(true)}
              style={{ 
                border: '2px solid #67e8f9',
                background: 'linear-gradient(135deg, #cffafe 0%, #a5f3fc 100%)'
              }}
            >
              <CardContent className="p-1 text-center">
                <MapPin className="h-3.5 w-3.5 mx-auto text-cyan-600 mb-0.5" />
                <p className="text-xs mb-0" style={{ fontFamily: 'Tajawal, sans-serif', color: '#0e7490' }}>
                  {currentTransaction.location?.address?.split('ØŒ')[1] || 'Ø§Ù„Ù…ÙˆÙ‚Ø¹'}
                </p>
                <p className="text-[9px] text-gray-500" style={{ fontFamily: 'Tajawal, sans-serif' }}>
                  Ø§Ù„Ù…ÙˆÙ‚Ø¹
                </p>
              </CardContent>
            </Card>

            {/* 8. Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² - ØªÙØ§Ø¹Ù„ÙŠ */}
            <Card 
              className="card-element card-rtl cursor-pointer hover:shadow-lg transition-all"
              onClick={() => setShowProgressDialog(true)}
              style={{ 
                border: '2px solid #6ee7b7',
                background: 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)'
              }}
            >
              <CardContent className="p-1 text-center">
                <TrendingUp className="h-3.5 w-3.5 mx-auto text-emerald-600 mb-0.5" />
                <p className="text-xs font-mono mb-0" style={{ color: '#065f46' }}>
                  {currentTransaction.progress}%
                </p>
                <p className="text-[9px] text-gray-500" style={{ fontFamily: 'Tajawal, sans-serif' }}>
                  Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²
                </p>
              </CardContent>
            </Card>
          </div>

          {/* Ù…Ø­ØªÙˆÙ‰ Ø¥Ø¶Ø§ÙÙŠ Ù„Ù„ØªØ§Ø¨ */}
          <Card className="card-rtl">
            <CardHeader>
              <CardTitle style={{ fontFamily: 'Tajawal, sans-serif' }}>
                ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
              </CardTitle>
            </CardHeader>
            <CardContent>
              <div className="grid grid-cols-2 gap-4" style={{ opacity: isEditable ? 1 : 0.6, pointerEvents: isEditable ? 'auto' : 'none' }}>
                <InputWithCopy
                  label="Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©"
                  id="transaction-number"
                  value={currentTransaction.number}
                  disabled={!isEditable}
                  copyable={true}
                  clearable={false}
                />
                <InputWithCopy
                  label="Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ù„Ùƒ"
                  id="owner-name"
                  value={currentTransaction.ownerName}
                  disabled={!isEditable}
                  copyable={true}
                  clearable={false}
                />
                <InputWithCopy
                  label="Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©"
                  id="owner-id"
                  value={currentTransaction.ownerId || ''}
                  disabled={!isEditable}
                  copyable={true}
                  clearable={false}
                />
                <InputWithCopy
                  label="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„"
                  id="owner-phone"
                  value={currentTransaction.ownerPhone || ''}
                  disabled={!isEditable}
                  copyable={true}
                  clearable={false}
                />
              </div>

              {!isEditable && (
                <div className="bg-blue-50 border-2 border-blue-200 rounded-lg p-4 text-center mt-4">
                  <Lock className="h-8 w-8 mx-auto text-blue-600 mb-2" />
                  <p style={{ fontFamily: 'Tajawal, sans-serif', color: '#1e40af', fontSize: '14px' }}>
                    Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø¨ Ù…ÙƒØªÙ…Ù„ ÙˆÙ…Ù‚ÙÙ„. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "Ø§Ø³ØªÙƒÙ…Ø§Ù„" Ù„ÙØªØ­ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„.
                  </p>
                </div>
              )}
            </CardContent>
          </Card>
        </div>
      );
    }

    // Ø§Ù„ØªØ§Ø¨Ø§Øª Ø§Ù„Ù…Ø·ÙˆØ±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
    if (activeTab === '284-06B') {
      return <Tab_RequestPurpose_Brief_Complete transactionId={selectedTransaction} readOnly={!isEditable} />;
    }
    
    if (activeTab === '284-06C') {
      return <Tab_RequestPurpose_Detailed_Complete transactionId={selectedTransaction} readOnly={!isEditable} />;
    }
    
    // Ø§Ù„ØªØ§Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© - Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ù„Ù…ÙƒÙˆÙ†Ø§Øª â­
    if (activeTab === '284-40') {
      return <Tab_FloorsNaming_Complete transactionId={selectedTransaction} readOnly={!isEditable} />;
    }
    
    if (activeTab === '284-41') {
      return <Tab_Setbacks_AllFloors_Complete transactionId={selectedTransaction} readOnly={!isEditable} />;
    }
    
    if (activeTab === '284-42') {
      return <Tab_FinalComponents_Detailed_Complete transactionId={selectedTransaction} readOnly={!isEditable} />;
    }
    
    if (activeTab === '284-43') {
      return <Tab_Components_Generic_Complete transactionId={selectedTransaction} readOnly={!isEditable} type="old-license" />;
    }
    
    if (activeTab === '284-44') {
      return <Tab_Components_Generic_Complete transactionId={selectedTransaction} readOnly={!isEditable} type="proposed" />;
    }
    
    if (activeTab === '284-45') {
      return <Tab_Components_Generic_Complete transactionId={selectedTransaction} readOnly={!isEditable} type="existing" />;
    }
    
    if (activeTab === '284-46') {
      return <Tab_Boundaries_Neighbors_Complete transactionId={selectedTransaction} readOnly={!isEditable} />;
    }
    
    if (activeTab === '284-47') {
      return <Tab_LandArea_Complete transactionId={selectedTransaction} readOnly={!isEditable} />;
    }
    
    // Ù…Ø­ØªÙˆÙ‰ Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ø¨Ø§Ù‚ÙŠ Ø§Ù„ØªØ§Ø¨Ø§Øª
    return (
      <div className="space-y-4">
        <Card className="card-rtl" style={{ 
          background: isCompleted 
            ? 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)' 
            : 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)',
          border: `2px solid ${isCompleted ? '#10b981' : '#f59e0b'}`
        }}>
          <CardContent className="p-4">
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-3">
                {isCompleted ? (
                  <CheckCircle className="h-6 w-6 text-green-600" />
                ) : (
                  <Clock className="h-6 w-6 text-yellow-600" />
                )}
                <div>
                  <h3 style={{ fontFamily: 'Tajawal, sans-serif', fontSize: '16px', fontWeight: 700, color: isCompleted ? '#065f46' : '#92400e' }}>
                    {isCompleted ? 'ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø¨' : 'Ø§Ù„ØªØ§Ø¨ Ù‚ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„'}
                  </h3>
                  <p style={{ fontFamily: 'Tajawal, sans-serif', fontSize: '12px', color: isCompleted ? '#059669' : '#b45309' }}>
                    {isCompleted 
                      ? `Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ù†Ø³Ø¨ÙŠ: ${currentTabConfig?.defaultWeight}% â€¢ Ù…ÙƒØªÙ…Ù„`
                      : `Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ù†Ø³Ø¨ÙŠ: ${currentTabConfig?.defaultWeight}% â€¢ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„`
                    }
                  </p>
                </div>
              </div>
              
              <div className="flex gap-2">
                {isCompleted && !isEditMode[activeTab] && (
                  <Button 
                    size="sm" 
                    onClick={() => toggleEditMode(activeTab)}
                    className="gap-2"
                    style={{ background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)' }}
                  >
                    <Unlock className="h-4 w-4" />
                    Ø§Ø³ØªÙƒÙ…Ø§Ù„
                  </Button>
                )}
                
                {isEditable && !isCompleted && (
                  <Button 
                    size="sm" 
                    onClick={() => openCompletionDialog(activeTab)}
                    className="gap-2"
                    style={{ background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)' }}
                  >
                    <Lock className="h-4 w-4" />
                    ÙˆØ³Ù… ÙƒÙ…ÙƒØªÙ…Ù„
                  </Button>
                )}
              </div>
            </div>
          </CardContent>
        </Card>

        <Card className="card-rtl">
          <CardHeader>
            <CardTitle style={{ fontFamily: 'Tajawal, sans-serif' }}>
              {currentTabConfig?.title}
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="space-y-4" style={{ opacity: isEditable ? 1 : 0.6, pointerEvents: isEditable ? 'auto' : 'none' }}>
              <p style={{ fontFamily: 'Tajawal, sans-serif', color: '#6b7280' }}>
                Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ§Ø¨ "{currentTabConfig?.title}" Ø³ÙŠØªÙ… ØªØ·ÙˆÙŠØ±Ù‡ Ù‡Ù†Ø§...
              </p>
              
              <div className="grid grid-cols-2 gap-4">
                <InputWithCopy
                  label="Ø­Ù‚Ù„ Ù…Ø«Ø§Ù„ 1"
                  id="field1"
                  placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"
                  disabled={!isEditable}
                />
                <InputWithCopy
                  label="Ø­Ù‚Ù„ Ù…Ø«Ø§Ù„ 2"
                  id="field2"
                  placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"
                  disabled={!isEditable}
                />
              </div>

              {!isEditable && (
                <div className="bg-blue-50 border-2 border-blue-200 rounded-lg p-4 text-center">
                  <Lock className="h-8 w-8 mx-auto text-blue-600 mb-2" />
                  <p style={{ fontFamily: 'Tajawal, sans-serif', color: '#1e40af', fontSize: '14px' }}>
                    Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø¨ Ù…ÙƒØªÙ…Ù„ ÙˆÙ…Ù‚ÙÙ„. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "Ø§Ø³ØªÙƒÙ…Ø§Ù„" Ù„ÙØªØ­ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„.
                  </p>
                </div>
              )}
            </div>
          </CardContent>
        </Card>
      </div>
    );
  };

  return (
    <div className="w-full h-full" dir="rtl">
      <CodeDisplay code="SCR-284-v10.3" position="top-right" />
      
      {/* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„ÙƒØ§Ù…Ù„ (Ø³Ø·Ø±ÙŠÙ†) */}
      <div
        style={{
          position: 'sticky',
          top: '0',
          zIndex: 10,
          background: 'linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)',
          borderBottom: '3px solid transparent',
          borderImage: 'linear-gradient(90deg, #2563eb 0%, #7c3aed 50%, #2563eb 100%) 1',
          padding: '0',
          marginBottom: '0',
          marginTop: '0',
          marginRight: '256px',
          boxShadow: '0 4px 16px rgba(37, 99, 235, 0.12), 0 2px 4px rgba(0, 0, 0, 0.06)'
        }}
      >
        {/* Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø£ÙˆÙ„: Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø§Ø´Ø© */}
        <div 
          className="flex items-center justify-between"
          style={{
            padding: '10px 20px',
            background: 'linear-gradient(135deg, rgba(37, 99, 235, 0.03) 0%, rgba(124, 58, 237, 0.02) 100%)'
          }}
        >
          <div className="flex items-center gap-3">
            <div 
              style={{
                padding: '8px',
                background: 'linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%)',
                borderRadius: '10px',
                boxShadow: '0 2px 6px rgba(37, 99, 235, 0.15)',
                border: '2px solid rgba(37, 99, 235, 0.2)'
              }}
            >
              <FileText 
                className="h-5 w-5" 
                style={{ 
                  color: '#2563eb',
                  filter: 'drop-shadow(0 1px 2px rgba(37, 99, 235, 0.3))' 
                }} 
              />
            </div>
            
            <div className="flex items-center gap-2">
              <h1 
                style={{ 
                  fontFamily: 'Tajawal, sans-serif', 
                  fontWeight: 700, 
                  fontSize: '18px', 
                  margin: 0,
                  background: 'linear-gradient(135deg, #1e40af 0%, #7c3aed 100%)',
                  WebkitBackgroundClip: 'text',
                  WebkitTextFillColor: 'transparent',
                  backgroundClip: 'text',
                  letterSpacing: '-0.02em',
                  whiteSpace: 'nowrap'
                }}
              >
                Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª
              </h1>
              

            </div>
          </div>
          
          <div 
            style={{
              padding: '10px 24px',
              background: 'linear-gradient(135deg, rgba(245, 158, 11, 0.12) 0%, rgba(251, 191, 36, 0.08) 100%)',
              borderRadius: '10px',
              border: '2px solid rgba(245, 158, 11, 0.3)',
              display: 'flex',
              alignItems: 'center',
              gap: '20px',
              minWidth: '600px'
            }}
          >
            {/* Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© */}
            <div style={{ display: 'flex', alignItems: 'center', gap: '10px', flexShrink: 0 }}>
              <span 
                style={{ 
                  fontFamily: 'Tajawal, sans-serif', 
                  fontSize: '13px',
                  fontWeight: 600,
                  color: '#78716c',
                  whiteSpace: 'nowrap'
                }}
              >
                Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© :
              </span>
              <span 
                className="font-mono"
                style={{ 
                  fontSize: '18px',
                  fontWeight: 700,
                  color: '#b45309',
                  background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',
                  WebkitBackgroundClip: 'text',
                  WebkitTextFillColor: 'transparent',
                  backgroundClip: 'text',
                  letterSpacing: '0.05em',
                  textShadow: '0 1px 2px rgba(245, 158, 11, 0.2)'
                }}
              >
                {selectedTransaction || currentTransaction?.number || '-------'}
              </span>
            </div>

            {/* ÙØ§ØµÙ„ Ø¹Ù…ÙˆØ¯ÙŠ */}
            <div 
              style={{ 
                width: '2px', 
                height: '30px', 
                background: 'linear-gradient(180deg, rgba(245, 158, 11, 0.3) 0%, rgba(245, 158, 11, 0.6) 50%, rgba(245, 158, 11, 0.3) 100%)',
                flexShrink: 0
              }} 
            />

            {/* Ù…Ø¤Ø´Ø± Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² */}
            <div style={{ display: 'flex', alignItems: 'center', gap: '12px', flex: 1, minWidth: 0 }}>
              <span 
                style={{ 
                  fontFamily: 'Tajawal, sans-serif', 
                  fontSize: '13px',
                  fontWeight: 600,
                  color: '#78716c',
                  whiteSpace: 'nowrap',
                  flexShrink: 0
                }}
              >
                Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² :
              </span>
              <div style={{ flex: 1, display: 'flex', alignItems: 'center', gap: '8px', minWidth: 0 }}>
                <Progress 
                  value={currentTransaction?.progress || 0} 
                  className="h-2.5 flex-1"
                  style={{
                    background: 'rgba(245, 158, 11, 0.15)',
                    borderRadius: '6px'
                  }}
                />
                <span 
                  className="font-mono"
                  style={{ 
                    fontSize: '14px',
                    fontWeight: 700,
                    color: '#d97706',
                    minWidth: '45px',
                    textAlign: 'left',
                    flexShrink: 0
                  }}
                >
                  {currentTransaction?.progress || 0}%
                </span>
              </div>
            </div>
          </div>
        </div>

        {/* Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© (ÙŠØ¸Ù‡Ø± Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¹Ø§Ù…Ù„Ø©) */}
        {selectedTransaction && (
          <div 
            style={{
              padding: '8px 20px',
              background: 'linear-gradient(135deg, rgba(249, 250, 251, 0.95) 0%, rgba(243, 244, 246, 0.95) 100%)',
              borderTop: '1px solid rgba(229, 231, 235, 0.5)',
              display: 'grid',
              gridTemplateColumns: 'repeat(auto-fit, minmax(110px, 1fr))',
              gap: '6px'
            }}
          >
            {/* Ø£ØªØ¹Ø§Ø¨ Ø§Ù„Ù…ÙƒØªØ¨ - ØµÙ„Ø§Ø­ÙŠØ© Ø®Ø§ØµØ© */}
            {currentUser.permissions.includes('VIEW_OFFICE_FEES') && (
              <Button
                size="sm"
                variant="outline"
                onClick={() => setShowOfficeFeesDialog(true)}
                disabled={!selectedTransaction}
                style={{
                  height: '28px',
                  padding: '0 8px',
                  fontSize: '10px',
                  fontFamily: 'Tajawal, sans-serif',
                  background: selectedTransaction ? 'linear-gradient(135deg, #fef3c7 0%, #fde047 100%)' : '#f3f4f6',
                  border: '1.5px solid #eab308',
                  color: selectedTransaction ? '#713f12' : '#9ca3af',
                  fontWeight: 600,
                  opacity: selectedTransaction ? 1 : 0.5
                }}
                className="hover:shadow-md transition-all"
              >
                <DollarSign className="h-3 w-3 ml-1" />
                Ø£ØªØ¹Ø§Ø¨ Ø§Ù„Ù…ÙƒØªØ¨
              </Button>
            )}

            {/* Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø§Ù„Ùƒ */}
            <Button
              size="sm"
              variant="outline"
              onClick={() => setShowMessageOwnerDialog(true)}
              disabled={!selectedTransaction}
              style={{
                height: '28px',
                padding: '0 8px',
                fontSize: '10px',
                fontFamily: 'Tajawal, sans-serif',
                background: selectedTransaction ? 'linear-gradient(135deg, #dbeafe 0%, #93c5fd 100%)' : '#f3f4f6',
                border: '1.5px solid #3b82f6',
                color: selectedTransaction ? '#1e3a8a' : '#9ca3af',
                fontWeight: 600,
                opacity: selectedTransaction ? 1 : 0.5
              }}
              className="hover:shadow-md transition-all"
            >
              <Mail className="h-3 w-3 ml-1" />
              Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø§Ù„Ùƒ
            </Button>

            {/* Ø¥Ø±Ø³Ø§Ù„ Ù…Ù„ÙØ§Øª */}
            <Button
              size="sm"
              variant="outline"
              onClick={() => setShowSendFilesDialog(true)}
              disabled={!selectedTransaction}
              style={{
                height: '28px',
                padding: '0 8px',
                fontSize: '10px',
                fontFamily: 'Tajawal, sans-serif',
                background: selectedTransaction ? 'linear-gradient(135deg, #e9d5ff 0%, #d8b4fe 100%)' : '#f3f4f6',
                border: '1.5px solid #a855f7',
                color: selectedTransaction ? '#581c87' : '#9ca3af',
                fontWeight: 600,
                opacity: selectedTransaction ? 1 : 0.5
              }}
              className="hover:shadow-md transition-all"
            >
              <Paperclip className="h-3 w-3 ml-1" />
              Ø¥Ø±Ø³Ø§Ù„ Ù…Ù„ÙØ§Øª
            </Button>

            {/* Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª */}
            <Button
              size="sm"
              variant="outline"
              onClick={() => setShowPauseDialog(true)}
              disabled={!selectedTransaction || selectedTransactionData?.status === 'on-hold' || selectedTransactionData?.status === 'cancelled' || selectedTransactionData?.status === 'completed'}
              style={{
                height: '28px',
                padding: '0 8px',
                fontSize: '10px',
                fontFamily: 'Tajawal, sans-serif',
                background: (selectedTransaction && selectedTransactionData?.status !== 'on-hold' && selectedTransactionData?.status !== 'cancelled' && selectedTransactionData?.status !== 'completed') ? 'linear-gradient(135deg, #fef3c7 0%, #fde047 100%)' : '#f3f4f6',
                border: '1.5px solid #eab308',
                color: (selectedTransaction && selectedTransactionData?.status !== 'on-hold' && selectedTransactionData?.status !== 'cancelled' && selectedTransactionData?.status !== 'completed') ? '#713f12' : '#9ca3af',
                fontWeight: 600,
                opacity: (selectedTransaction && selectedTransactionData?.status !== 'on-hold' && selectedTransactionData?.status !== 'cancelled' && selectedTransactionData?.status !== 'completed') ? 1 : 0.5
              }}
              className="hover:shadow-md transition-all"
            >
              <AlertCircle className="h-3 w-3 ml-1" />
              Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª
            </Button>

            {/* Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© */}
            <Button
              size="sm"
              variant="outline"
              onClick={() => setShowCancelDialog(true)}
              disabled={!selectedTransaction || selectedTransactionData?.status === 'cancelled' || selectedTransactionData?.status === 'completed'}
              style={{
                height: '28px',
                padding: '0 8px',
                fontSize: '10px',
                fontFamily: 'Tajawal, sans-serif',
                background: (selectedTransaction && selectedTransactionData?.status !== 'cancelled' && selectedTransactionData?.status !== 'completed') ? 'linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)' : '#f3f4f6',
                border: '1.5px solid #ef4444',
                color: (selectedTransaction && selectedTransactionData?.status !== 'cancelled' && selectedTransactionData?.status !== 'completed') ? '#7f1d1d' : '#9ca3af',
                fontWeight: 600,
                opacity: (selectedTransaction && selectedTransactionData?.status !== 'cancelled' && selectedTransactionData?.status !== 'completed') ? 1 : 0.5
              }}
              className="hover:shadow-md transition-all"
            >
              <X className="h-3 w-3 ml-1" />
              Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
            </Button>

            {/* Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ†Ø´ÙŠØ· */}
            <Button
              size="sm"
              variant="outline"
              onClick={() => setShowReactivateDialog(true)}
              disabled={!selectedTransaction || selectedTransactionData?.status !== 'cancelled'}
              style={{
                height: '28px',
                padding: '0 8px',
                fontSize: '10px',
                fontFamily: 'Tajawal, sans-serif',
                background: (selectedTransaction && selectedTransactionData?.status === 'cancelled') ? 'linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)' : '#f3f4f6',
                border: '1.5px solid #22c55e',
                color: (selectedTransaction && selectedTransactionData?.status === 'cancelled') ? '#14532d' : '#9ca3af',
                fontWeight: 600,
                opacity: (selectedTransaction && selectedTransactionData?.status === 'cancelled') ? 1 : 0.5
              }}
              className="hover:shadow-md transition-all"
            >
              <RefreshCw className="h-3 w-3 ml-1" />
              Ø¥Ø¹Ø§Ø¯Ø© ØªÙ†Ø´ÙŠØ·
            </Button>

            {/* Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© */}
            <Button
              size="sm"
              variant="outline"
              onClick={() => setShowCompleteTransactionDialog(true)}
              disabled={!selectedTransaction || selectedTransactionData?.status === 'completed' || selectedTransactionData?.status === 'cancelled'}
              style={{
                height: '28px',
                padding: '0 8px',
                fontSize: '10px',
                fontFamily: 'Tajawal, sans-serif',
                background: (selectedTransaction && selectedTransactionData?.status !== 'completed' && selectedTransactionData?.status !== 'cancelled') ? 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)' : '#f3f4f6',
                border: '1.5px solid #10b981',
                color: (selectedTransaction && selectedTransactionData?.status !== 'completed' && selectedTransactionData?.status !== 'cancelled') ? '#065f46' : '#9ca3af',
                fontWeight: 600,
                opacity: (selectedTransaction && selectedTransactionData?.status !== 'completed' && selectedTransactionData?.status !== 'cancelled') ? 1 : 0.5
              }}
              className="hover:shadow-md transition-all"
            >
              <CheckCircle className="h-3 w-3 ml-1" />
              Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
            </Button>

            {/* Ø±ÙØ¹ Ù…Ù„ÙØ§Øª */}
            <Button
              size="sm"
              variant="outline"
              onClick={() => setShowUploadFilesDialog(true)}
              disabled={!selectedTransaction}
              style={{
                height: '28px',
                padding: '0 8px',
                fontSize: '10px',
                fontFamily: 'Tajawal, sans-serif',
                background: selectedTransaction ? 'linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)' : '#f3f4f6',
                border: '1.5px solid #a855f7',
                color: selectedTransaction ? '#581c87' : '#9ca3af',
                fontWeight: 600,
                opacity: selectedTransaction ? 1 : 0.5
              }}
              className="hover:shadow-md transition-all"
            >
              <span style={{ display: 'inline-block', transform: 'rotate(180deg)', marginLeft: '4px' }}>
                <Download className="h-3 w-3" />
              </span>
              Ø±ÙØ¹ Ù…Ù„ÙØ§Øª
            </Button>

            {/* Ù†Ù‚Ù„ Ø§Ù„Ù…Ù„ÙƒÙŠØ© */}
            <Button
              size="sm"
              variant="outline"
              onClick={() => setShowTransferOwnershipDialog(true)}
              disabled={!selectedTransaction}
              style={{
                height: '28px',
                padding: '0 8px',
                fontSize: '10px',
                fontFamily: 'Tajawal, sans-serif',
                background: selectedTransaction ? 'linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%)' : '#f3f4f6',
                border: '1.5px solid #f97316',
                color: selectedTransaction ? '#7c2d12' : '#9ca3af',
                fontWeight: 600,
                opacity: selectedTransaction ? 1 : 0.5
              }}
              className="hover:shadow-md transition-all"
            >
              <UserPlus className="h-3 w-3 ml-1" />
              Ù†Ù‚Ù„ Ø§Ù„Ù…Ù„ÙƒÙŠØ©
            </Button>
          </div>
        )}

        {/* Ø´Ø±ÙŠØ· Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙˆØ§Ù„Ø¨Ø­Ø« */}
        <div 
          style={{
            padding: '6px 16px',
            background: 'linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(147, 51, 234, 0.05) 100%)',
            borderTop: '1px solid rgba(37, 99, 235, 0.1)'
          }}
        >
          <div className="grid grid-cols-12 gap-2">
            {/* Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© - Ù…ÙˆØ³Ø¹ ÙˆÙ…Ù…ÙŠØ² */}
            <div className="col-span-5">
              <select
                id="selected-transaction"
                value={selectedTransaction}
                onChange={(e) => setSelectedTransaction(e.target.value)}
                style={{
                  width: '100%',
                  height: '32px',
                  padding: '4px 12px',
                  border: '3px solid #f59e0b',
                  borderRadius: '8px',
                  fontFamily: 'Tajawal, sans-serif',
                  fontSize: '13px',
                  fontWeight: 700,
                  color: '#b45309',
                  direction: 'rtl',
                  textAlign: 'right',
                  background: 'linear-gradient(135deg, rgba(245, 158, 11, 0.08) 0%, rgba(251, 191, 36, 0.12) 100%)',
                  boxShadow: '0 2px 8px rgba(245, 158, 11, 0.25)',
                  transition: 'all 0.2s'
                }}
                onFocus={(e) => {
                  e.target.style.borderColor = '#d97706';
                  e.target.style.boxShadow = '0 0 0 3px rgba(245, 158, 11, 0.2), 0 2px 8px rgba(245, 158, 11, 0.35)';
                }}
                onBlur={(e) => {
                  e.target.style.borderColor = '#f59e0b';
                  e.target.style.boxShadow = '0 2px 8px rgba(245, 158, 11, 0.25)';
                }}
              >
                {mockTransactions.map(t => {
                  const status = transactionStatuses[t.status as keyof typeof transactionStatuses];
                  return (
                    <option 
                      key={t.id} 
                      value={t.id}
                      style={{ 
                        fontFamily: 'Tajawal, sans-serif',
                        fontWeight: 700,
                        background: status?.bgColor || '#ffffff',
                        color: status?.color || '#000000'
                      }}
                    >
                      {formatTransactionLabel(t)} â€¢ {status?.label}
                    </option>
                  );
                })}
              </select>
            </div>

            {/* Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø°ÙƒÙŠ - Ù…ØµØºØ± */}
            <div className="col-span-3">
              <input
                type="text"
                id="search-transaction"
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
                placeholder={`Ø¨Ø­Ø« (${detectedSearchType === 'auto' ? 'ØªÙ„Ù‚Ø§Ø¦ÙŠ' : detectedSearchType === 'number' ? 'Ø±Ù‚Ù…' : detectedSearchType === 'owner' ? 'Ù…Ø§Ù„Ùƒ' : detectedSearchType === 'id' ? 'Ù‡ÙˆÙŠØ©' : 'Ù…Ø®Ø·Ø·'})`}
                style={{
                  width: '100%',
                  height: '32px',
                  padding: '4px 8px',
                  border: '2px solid #e5e7eb',
                  borderRadius: '6px',
                  fontFamily: 'Tajawal, sans-serif',
                  fontSize: '11px',
                  direction: 'rtl',
                  textAlign: 'right',
                  background: 'linear-gradient(135deg, rgba(147, 51, 234, 0.03) 0%, rgba(59, 130, 246, 0.03) 100%)',
                  transition: 'all 0.2s'
                }}
                onFocus={(e) => {
                  e.target.style.borderColor = '#2563eb';
                  e.target.style.boxShadow = '0 0 0 2px rgba(37, 99, 235, 0.1)';
                }}
                onBlur={(e) => {
                  e.target.style.borderColor = '#e5e7eb';
                  e.target.style.boxShadow = 'none';
                }}
              />
            </div>

            {/* Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© - Ù…ØµØºØ± */}
            <div className="col-span-2">
              <select
                id="filter-type"
                value={filterTransactionType}
                onChange={(e) => setFilterTransactionType(e.target.value)}
                style={{
                  width: '100%',
                  height: '32px',
                  padding: '4px 6px',
                  border: '2px solid #e5e7eb',
                  borderRadius: '6px',
                  fontFamily: 'Tajawal, sans-serif',
                  fontSize: '10px',
                  direction: 'rtl',
                  textAlign: 'right',
                  background: 'linear-gradient(135deg, rgba(147, 51, 234, 0.03) 0%, rgba(59, 130, 246, 0.03) 100%)',
                  transition: 'all 0.2s'
                }}
                onFocus={(e) => {
                  e.target.style.borderColor = '#2563eb';
                  e.target.style.boxShadow = '0 0 0 2px rgba(37, 99, 235, 0.1)';
                }}
                onBlur={(e) => {
                  e.target.style.borderColor = '#e5e7eb';
                  e.target.style.boxShadow = 'none';
                }}
              >
                <option value="">ÙƒÙ„ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹</option>
                {transactionTypes.map(type => (
                  <option key={type.value} value={type.value}>
                    {type.label}
                  </option>
                ))}
              </select>
            </div>

            {/* Ø§Ù„Ø³Ù†Ø© - Ù…ØµØºØ± */}
            <div className="col-span-1">
              <select
                id="filter-year"
                value={filterYear}
                onChange={(e) => setFilterYear(e.target.value)}
                style={{
                  width: '100%',
                  height: '32px',
                  padding: '4px 4px',
                  border: '2px solid #e5e7eb',
                  borderRadius: '6px',
                  fontFamily: 'Tajawal, sans-serif',
                  fontSize: '10px',
                  direction: 'rtl',
                  textAlign: 'right',
                  background: 'linear-gradient(135deg, rgba(147, 51, 234, 0.03) 0%, rgba(59, 130, 246, 0.03) 100%)',
                  transition: 'all 0.2s'
                }}
                onFocus={(e) => {
                  e.target.style.borderColor = '#2563eb';
                  e.target.style.boxShadow = '0 0 0 2px rgba(37, 99, 235, 0.1)';
                }}
                onBlur={(e) => {
                  e.target.style.borderColor = '#e5e7eb';
                  e.target.style.boxShadow = 'none';
                }}
              >
                <option value="">Ø§Ù„Ø³Ù†Ø©</option>
                <option value="2022">2022</option>
                <option value="2023">2023</option>
                <option value="2024">2024</option>
                <option value="2025">2025</option>
              </select>
            </div>

            {/* Ø§Ù„Ø´Ù‡Ø± - Ù…ØµØºØ± */}
            <div className="col-span-1">
              <select
                id="filter-month"
                value={filterMonth}
                onChange={(e) => setFilterMonth(e.target.value)}
                style={{
                  width: '100%',
                  height: '32px',
                  padding: '4px 4px',
                  border: '2px solid #e5e7eb',
                  borderRadius: '6px',
                  fontFamily: 'Tajawal, sans-serif',
                  fontSize: '10px',
                  direction: 'rtl',
                  textAlign: 'right',
                  background: 'linear-gradient(135deg, rgba(147, 51, 234, 0.03) 0%, rgba(59, 130, 246, 0.03) 100%)',
                  transition: 'all 0.2s'
                }}
                onFocus={(e) => {
                  e.target.style.borderColor = '#2563eb';
                  e.target.style.boxShadow = '0 0 0 2px rgba(37, 99, 235, 0.1)';
                }}
                onBlur={(e) => {
                  e.target.style.borderColor = '#e5e7eb';
                  e.target.style.boxShadow = 'none';
                }}
              >
                <option value="">Ø§Ù„Ø´Ù‡Ø±</option>
                <option value="01">ÙŠÙ†Ø§ÙŠØ±</option>
                <option value="02">ÙØ¨Ø±Ø§ÙŠØ±</option>
                <option value="03">Ù…Ø§Ø±Ø³</option>
                <option value="04">Ø£Ø¨Ø±ÙŠÙ„</option>
                <option value="05">Ù…Ø§ÙŠÙˆ</option>
                <option value="06">ÙŠÙˆÙ†ÙŠÙˆ</option>
                <option value="07">ÙŠÙˆÙ„ÙŠÙˆ</option>
                <option value="08">Ø£ØºØ³Ø·Ø³</option>
                <option value="09">Ø³Ø¨ØªÙ…Ø¨Ø±</option>
                <option value="10">Ø£ÙƒØªÙˆØ¨Ø±</option>
                <option value="11">Ù†ÙˆÙÙ…Ø¨Ø±</option>
                <option value="12">Ø¯ÙŠØ³Ù…Ø¨Ø±</option>
              </select>
            </div>
          </div>
        </div>

        {/* Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© */}
        <div 
          style={{
            padding: '8px 20px',
            background: 'linear-gradient(135deg, rgba(249, 250, 251, 0.8) 0%, rgba(243, 244, 246, 0.8) 100%)',
            borderTop: '1px solid rgba(229, 231, 235, 0.5)',
            display: 'flex',
            gap: '8px',
            overflowX: 'auto'
          }}
        >
          <Button 
            size="sm" 
            variant="outline" 
            className="h-7 text-xs gap-1 flex-shrink-0 bg-gradient-to-r from-purple-50 to-blue-50 hover:from-purple-100 hover:to-blue-100 border-purple-300"
            onClick={() => setShowDigitalCertification(true)}
          >
            <FileSignature className="h-3 w-3 text-purple-600" />
            <span style={{ fontFamily: 'Tajawal, sans-serif' }}>Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ</span>
          </Button>
          <Button size="sm" variant="outline" className="h-7 text-xs gap-1 flex-shrink-0">
            <Plus className="h-3 w-3" />Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¹Ø§Ù…Ù„Ø©
          </Button>
          <Button size="sm" variant="outline" className="h-7 text-xs gap-1 flex-shrink-0">
            <UserPlus className="h-3 w-3" />Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ù„Ùƒ
          </Button>
          <Button size="sm" variant="outline" className="h-7 text-xs gap-1 flex-shrink-0">
            <FolderOpen className="h-3 w-3" />Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª (750)
          </Button>
          <Button size="sm" variant="outline" className="h-7 text-xs gap-1 flex-shrink-0">
            <Stamp className="h-3 w-3" />Ø§Ù„Ø£Ø®ØªØ§Ù… (946)
          </Button>
          <Button size="sm" variant="outline" className="h-7 text-xs gap-1 flex-shrink-0">
            <FileSignature className="h-3 w-3" />Ø§Ù„ØªØ¹Ù‡Ø¯Ø§Øª (940)
          </Button>
          <Button size="sm" variant="outline" className="h-7 text-xs gap-1 flex-shrink-0">
            <Printer className="h-3 w-3" />Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© (831)
          </Button>
          <Button size="sm" variant="outline" className="h-7 text-xs gap-1 flex-shrink-0">
            <Download className="h-3 w-3" />ØªØµØ¯ÙŠØ±
          </Button>
          <Button size="sm" variant="outline" className="h-7 text-xs gap-1 flex-shrink-0">
            <History className="h-3 w-3" />Ø§Ù„Ø³Ø¬Ù„ (285)
          </Button>
          <Button size="sm" variant="outline" className="h-7 text-xs gap-1 flex-shrink-0">
            <Settings className="h-3 w-3" />Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (701)
          </Button>
        </div>
      </div>

      <div className="flex" style={{ gap: '4px', paddingTop: '16px' }}>
        {/* Ø³Ø§ÙŠØ¯ Ø¨Ø§Ø± Ù…Ø®ØµØµ Ù„Ù„Ø´Ø§Ø´Ø© 284 */}
        <div
          style={{
            width: '220px',
            minWidth: '220px',
            height: 'calc(100vh - 72px)',
            position: 'fixed',
            top: '40px',
            right: '280px',
            background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 50%, #fcd34d 100%)',
            borderLeft: '2px solid #f59e0b',
            borderRadius: '16px 0 0 16px',
            boxShadow: '-4px 0 16px rgba(245, 158, 11, 0.25)',
            overflow: 'hidden',
            zIndex: 5
          }}
        >
          <ScrollArea className="h-full">
            <style>{`
              .scroll-area-viewport::-webkit-scrollbar {
                width: 8px !important;
                display: block !important;
              }
              .scroll-area-viewport::-webkit-scrollbar-track {
                background: rgba(245, 158, 11, 0.2) !important;
                border-radius: 6px !important;
              }
              .scroll-area-viewport::-webkit-scrollbar-thumb {
                background: #d97706 !important;
                border-radius: 6px !important;
                border: 1px solid rgba(255, 255, 255, 0.2) !important;
              }
              .scroll-area-viewport::-webkit-scrollbar-thumb:hover {
                background: #f59e0b !important;
              }
            `}</style>
            
            <div className="p-2 space-y-0.5">
              {TABS_CONFIG.map((tab) => {
                const isActive = activeTab === tab.id;
                const Icon = tab.icon;
                return (
                  <button
                    key={tab.id}
                    onClick={() => setActiveTab(tab.id)}
                    style={{
                      width: '100%',
                      padding: '8px 12px',
                      display: 'flex',
                      alignItems: 'center',
                      gap: '8px',
                      background: isActive ? '#ffffff' : 'rgba(255, 255, 255, 0.2)',
                      border: isActive ? '2px solid #dc2626' : '2px solid transparent',
                      borderRadius: '8px',
                      cursor: 'pointer',
                      transition: 'all 0.2s',
                      fontFamily: 'Tajawal, sans-serif',
                      fontSize: '14px',
                      fontWeight: isActive ? 700 : 600,
                      color: isActive ? '#dc2626' : '#1e40af',
                      textAlign: 'right',
                      direction: 'rtl',
                      boxShadow: isActive ? '0 4px 12px rgba(220, 38, 38, 0.3)' : 'none',
                      transform: isActive ? 'scale(1.03)' : 'scale(1)'
                    }}
                    onMouseEnter={(e) => {
                      if (!isActive) {
                        e.currentTarget.style.background = 'rgba(255, 255, 255, 0.4)';
                      }
                    }}
                    onMouseLeave={(e) => {
                      if (!isActive) {
                        e.currentTarget.style.background = 'rgba(255, 255, 255, 0.2)';
                      }
                    }}
                  >
                    <Icon className="h-4 w-4" style={{ flexShrink: 0, color: isActive ? '#dc2626' : '#1e40af' }} />
                    <span className="flex-1 text-right">{tab.title}</span>
                    <Badge 
                      className="font-mono"
                      style={{
                        fontSize: '10px',
                        padding: '2px 6px',
                        background: isActive ? 'rgba(220, 38, 38, 0.1)' : 'rgba(30, 64, 175, 0.1)',
                        color: isActive ? '#dc2626' : '#1e40af',
                        border: `1px solid ${isActive ? '#dc2626' : '#1e40af'}`
                      }}
                    >
                      {tab.number}
                    </Badge>
                  </button>
                );
              })}
            </div>
          </ScrollArea>
        </div>

        {/* Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙ…Ø±ÙŠØ± */}
        <div className="flex-1" style={{ minHeight: 'calc(100vh - 220px)', marginRight: '220px' }}>
          {renderTabContent()}
        </div>
      </div>

      {/* Ù†Ø§ÙØ°Ø© Ø¥ØªÙ…Ø§Ù… Ø§Ù„ØªØ§Ø¨ */}
      <Dialog open={showCompletionDialog} onOpenChange={setShowCompletionDialog}>
        <DialogContent className="max-w-md" style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}>
          <DialogHeader>
            <DialogTitle style={{ fontFamily: 'Tajawal, sans-serif', fontSize: '20px' }}>
              <Lock className="h-5 w-5 inline ml-2" />
              Ø¥ØªÙ…Ø§Ù… Ø§Ù„ØªØ§Ø¨
            </DialogTitle>
          </DialogHeader>
          
          <div className="space-y-4">
            <p style={{ fontFamily: 'Tajawal, sans-serif', color: '#374151' }}>
              Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥ØªÙ…Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø¨ØŸ Ø³ÙŠØªÙ… Ù‚ÙÙ„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙˆÙ„Ù† ØªØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¥Ù„Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø§Ø³ØªÙƒÙ…Ø§Ù„".
            </p>
            
            <div>
              <label htmlFor="completion-notes" style={{ fontFamily: 'Tajawal, sans-serif', fontSize: '14px', fontWeight: 600, color: '#374151', display: 'block', marginBottom: '8px' }}>
                Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
              </label>
              <textarea
                id="completion-notes"
                value={completionNotes}
                onChange={(e) => setCompletionNotes(e.target.value)}
                rows={4}
                placeholder="Ø£Ø¶Ù Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª..."
                style={{
                  width: '100%',
                  padding: '10px 12px',
                  border: '2px solid #e5e7eb',
                  borderRadius: '8px',
                  fontFamily: 'Tajawal, sans-serif',
                  fontSize: '13px',
                  direction: 'rtl',
                  textAlign: 'right',
                  resize: 'vertical'
                }}
              />
            </div>
          </div>

          <DialogFooter>
            <Button variant="outline" onClick={() => setShowCompletionDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥Ù„ØºØ§Ø¡
            </Button>
            <Button onClick={handleSaveCompletion} className="bg-gradient-to-r from-green-600 to-emerald-600">
              <CheckCircle className="h-4 w-4 ml-1" />
              ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥ØªÙ…Ø§Ù…
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Ù†Ø§ÙØ°Ø© Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ */}
      <Dialog open={showDigitalCertification} onOpenChange={setShowDigitalCertification}>
        <DialogContent 
          className="max-w-6xl" 
          style={{ 
            fontFamily: 'Tajawal, sans-serif', 
            direction: 'rtl',
            maxHeight: '90vh'
          }}
        >
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontFamily: 'Tajawal, sans-serif', fontSize: '22px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div 
                style={{
                  padding: '8px',
                  background: 'linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%)',
                  borderRadius: '10px',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center'
                }}
              >
                <FileSignature className="h-6 w-6" style={{ color: '#7c3aed' }} />
              </div>
              <span style={{ background: 'linear-gradient(135deg, #6d28d9 0%, #7c3aed 100%)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent' }}>
                Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ø§Ù„Ø³Ø±ÙŠØ¹
              </span>
            </DialogTitle>
          </DialogHeader>
          
          <div style={{ maxHeight: 'calc(90vh - 180px)', overflowY: 'auto' }}>
            <div className="grid grid-cols-2 gap-6">
              {/* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠÙ…Ù†: Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª */}
              <div>
                <h3 className="text-base mb-3" style={{ fontFamily: 'Tajawal, sans-serif', fontWeight: 700, color: '#1f2937' }}>
                  <Database className="h-4 w-4 inline ml-1" />
                  Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
                </h3>
                
                <div className="space-y-2" style={{ maxHeight: '500px', overflowY: 'auto' }}>
                  {transactionDocuments.map((doc) => (
                    <Card 
                      key={doc.id}
                      className={`card-rtl cursor-pointer transition-all ${selectedDocumentForCert === doc.id ? 'ring-2 ring-purple-500' : ''}`}
                      onClick={() => setSelectedDocumentForCert(doc.id)}
                      style={{ 
                        background: selectedDocumentForCert === doc.id 
                          ? 'linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%)' 
                          : '#ffffff',
                        border: selectedDocumentForCert === doc.id ? '2px solid #7c3aed' : '1px solid #e5e7eb'
                      }}
                    >
                      <CardContent className="p-3">
                        <div className="flex items-center justify-between">
                          <div className="flex items-center gap-3">
                            <div 
                              style={{
                                width: '40px',
                                height: '40px',
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center',
                                background: selectedDocumentForCert === doc.id 
                                  ? 'linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)' 
                                  : 'linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)',
                                borderRadius: '8px'
                              }}
                            >
                              <FileText className="h-5 w-5" style={{ color: selectedDocumentForCert === doc.id ? '#ffffff' : '#2563eb' }} />
                            </div>
                            <div>
                              <p style={{ fontFamily: 'Tajawal, sans-serif', fontSize: '13px', fontWeight: 600, color: '#1f2937' }}>
                                {doc.name}
                              </p>
                              <p style={{ fontFamily: 'Tajawal, sans-serif', fontSize: '11px', color: '#6b7280' }}>
                                {doc.category}
                              </p>
                            </div>
                          </div>
                          
                          <Badge className={doc.certified ? 'bg-green-100 text-green-700' : 'bg-orange-100 text-orange-700'}>
                            {doc.certified ? 'âœ“ Ù…ÙˆØ«Ù‚' : 'â³ ØºÙŠØ± Ù…ÙˆØ«Ù‚'}
                          </Badge>
                        </div>
                      </CardContent>
                    </Card>
                  ))}
                </div>
              </div>

              {/* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠØ³Ø±: Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ */}
              <div>
                <h3 className="text-base mb-3" style={{ fontFamily: 'Tajawal, sans-serif', fontWeight: 700, color: '#1f2937' }}>
                  <FileCheck className="h-4 w-4 inline ml-1" />
                  Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØ«ÙŠÙ‚
                </h3>

                <div className="space-y-4">
                  {/* Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ù…Ø­Ø¯Ø¯ */}
                  <div 
                    style={{ 
                      padding: '12px',
                      background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)',
                      borderRadius: '8px',
                      border: '1px solid #f59e0b'
                    }}
                  >
                    <p style={{ fontFamily: 'Tajawal, sans-serif', fontSize: '12px', color: '#92400e', marginBottom: '4px' }}>
                      Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ù…Ø­Ø¯Ø¯:
                    </p>
                    <p style={{ fontFamily: 'Tajawal, sans-serif', fontSize: '14px', fontWeight: 600, color: selectedDocumentForCert ? '#166534' : '#9ca3af' }}>
                      {selectedDocumentForCert 
                        ? transactionDocuments.find(d => d.id === selectedDocumentForCert)?.name 
                        : 'Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…Ø³ØªÙ†Ø¯ Ø¨Ø¹Ø¯'}
                    </p>
                  </div>

                  {/* Ù†ÙˆØ¹ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ */}
                  <SelectWithCopy
                    label="Ù†ÙˆØ¹ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ *"
                    id="certification-type"
                    value={certificationType}
                    onChange={setCertificationType}
                    options={[
                      { value: 'digital', label: 'ğŸ” ØªÙˆØ«ÙŠÙ‚ Ø±Ù‚Ù…ÙŠ (Digital Signature)' },
                      { value: 'stamp', label: 'ğŸ›ï¸ Ø®ØªÙ… Ø±Ø³Ù…ÙŠ (Official Stamp)' },
                      { value: 'signature', label: 'âœï¸ ØªÙˆÙ‚ÙŠØ¹ ÙŠØ¯ÙˆÙŠ (Manual Signature)' },
                      { value: 'notary', label: 'ğŸ“‹ ØªÙˆØ«ÙŠÙ‚ ÙƒØªØ§Ø¨ÙŠ (Notary)' },
                      { value: 'electronic', label: 'ğŸ’» ØªÙˆØ«ÙŠÙ‚ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (E-Certification)' }
                    ]}
                    copyable={false}
                    clearable={false}
                  />

                  {/* Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ù…ØµØ¯Ù‚ */}
                  <SelectWithCopy
                    label="Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ù…ØµØ¯Ù‚ *"
                    id="certifier-employee"
                    value={certifierEmployee}
                    onChange={setCertifierEmployee}
                    options={certifierEmployees}
                    copyable={true}
                    clearable={true}
                  />

                  {/* Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª */}
                  <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px' }}>
                    <InputWithCopy
                      label="ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙˆØ«ÙŠÙ‚ *"
                      id="certification-date"
                      type="date"
                      value={certificationDate}
                      onChange={(e) => setCertificationDate(e.target.value)}
                      copyable={true}
                      clearable={false}
                    />
                    <InputWithCopy
                      label="ÙˆÙ‚Øª Ø§Ù„ØªÙˆØ«ÙŠÙ‚ *"
                      id="certification-time"
                      type="time"
                      value={certificationTime}
                      onChange={(e) => setCertificationTime(e.target.value)}
                      copyable={true}
                      clearable={false}
                    />
                  </div>

                  {/* Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª */}
                  <div className="form-group">
                    <label 
                      htmlFor="certification-notes" 
                      style={{ 
                        display: 'block',
                        fontFamily: 'Tajawal, sans-serif',
                        fontSize: '14px',
                        fontWeight: 600,
                        color: '#374151',
                        marginBottom: '8px',
                        textAlign: 'right'
                      }}
                    >
                      Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ØªÙˆØ«ÙŠÙ‚ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
                    </label>
                    <textarea
                      id="certification-notes"
                      value={certificationNotes}
                      onChange={(e) => setCertificationNotes(e.target.value)}
                      rows={4}
                      placeholder="Ø£Ø¶Ù Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø£Ùˆ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ© Ø­ÙˆÙ„ Ø§Ù„ØªÙˆØ«ÙŠÙ‚..."
                      style={{
                        width: '100%',
                        padding: '10px 12px',
                        border: '2px solid #e5e7eb',
                        borderRadius: '8px',
                        fontFamily: 'Tajawal, sans-serif',
                        fontSize: '13px',
                        direction: 'rtl',
                        textAlign: 'right',
                        resize: 'vertical',
                        transition: 'all 0.2s',
                        background: 'linear-gradient(135deg, #fafafa 0%, #ffffff 100%)'
                      }}
                      onFocus={(e) => {
                        e.target.style.borderColor = '#2563eb';
                        e.target.style.boxShadow = '0 0 0 3px rgba(37, 99, 235, 0.1)';
                      }}
                      onBlur={(e) => {
                        e.target.style.borderColor = '#e5e7eb';
                        e.target.style.boxShadow = 'none';
                      }}
                    />
                  </div>

                  {/* Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© */}
                  <div 
                    style={{ 
                      padding: '12px',
                      background: 'linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)',
                      borderRadius: '8px',
                      border: '1px solid #93c5fd'
                    }}
                  >
                    <div className="flex items-center gap-2 mb-2">
                      <Shield className="h-4 w-4 text-blue-600" />
                      <p style={{ fontFamily: 'Tajawal, sans-serif', fontSize: '13px', fontWeight: 600, color: '#1e40af', margin: 0 }}>
                        Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†
                      </p>
                    </div>
                    <div className="space-y-1" style={{ fontSize: '11px', color: '#64748b' }}>
                      <p style={{ margin: 0 }}>âœ“ Ø³ÙŠØªÙ… Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø¨Ø´ÙƒÙ„ Ù…Ø´ÙØ±</p>
                      <p style={{ margin: 0 }}>âœ“ Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ù…ØµØ¯Ù‚</p>
                      <p style={{ margin: 0 }}>âœ“ Ø³ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ ÙÙŠ Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·</p>
                      <p style={{ margin: 0 }}>âœ“ ÙŠÙ…ÙƒÙ† Ø·Ø¨Ø§Ø¹Ø© Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø¨Ø¹Ø¯ Ø§Ù„Ø­ÙØ¸</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <DialogFooter 
            style={{ 
              borderTop: '2px solid #e5e7eb', 
              paddingTop: '16px',
              display: 'flex',
              gap: '12px',
              justifyContent: 'space-between'
            }}
          >
            <div className="flex gap-2">
              <Button 
                variant="outline" 
                onClick={() => setShowDigitalCertification(false)}
                style={{ fontFamily: 'Tajawal, sans-serif' }}
              >
                <X className="h-4 w-4 ml-1" />
                Ø¥Ù„ØºØ§Ø¡
              </Button>
            </div>
            <div className="flex gap-2">
              <Button 
                variant="outline"
                onClick={handlePrintCertification}
                disabled={!selectedDocumentForCert}
                style={{ fontFamily: 'Tajawal, sans-serif' }}
              >
                <Printer className="h-4 w-4 ml-1" />
                Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©
              </Button>
              <Button 
                onClick={handleSaveCertification}
                disabled={!selectedDocumentForCert || !certificationType || !certifierEmployee}
                className="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700"
                style={{ fontFamily: 'Tajawal, sans-serif' }}
              >
                <Save className="h-4 w-4 ml-1" />
                Ø­ÙØ¸ Ø§Ù„ØªÙˆØ«ÙŠÙ‚
              </Button>
            </div>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Ù†Ø§ÙØ°Ø© Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ© */}
      <Dialog open={showTransactionNumberDialog} onOpenChange={setShowTransactionNumberDialog}>
        <DialogContent 
          className="max-w-4xl" 
          style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}
        >
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontSize: '22px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{
                padding: '8px',
                background: 'linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)',
                borderRadius: '10px'
              }}>
                <FileText className="h-6 w-6" style={{ color: '#2563eb' }} />
              </div>
              <span style={{ background: 'linear-gradient(135deg, #1e40af 0%, #2563eb 100%)', WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent' }}>
                ØªÙØ§ØµÙŠÙ„ Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
              </span>
            </DialogTitle>
          </DialogHeader>

          <div className="grid grid-cols-2 gap-6" style={{ padding: '20px 0' }}>
            {/* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠÙ…Ù†: ØªØ­Ù„ÙŠÙ„ Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© */}
            <div>
              <h3 className="text-base mb-3" style={{ fontWeight: 700, color: '#1f2937' }}>
                <Hash className="h-4 w-4 inline ml-1" />
                ØªØ­Ù„ÙŠÙ„ Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
              </h3>

              <Card className="card-rtl" style={{ background: 'linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)', border: '2px solid #93c5fd' }}>
                <CardContent className="p-4 space-y-3">
                  <div className="flex items-center justify-between">
                    <span style={{ fontSize: '13px', color: '#64748b' }}>Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„ÙƒØ§Ù…Ù„:</span>
                    <span className="font-mono" style={{ fontSize: '16px', fontWeight: 700, color: '#1e40af' }}>
                      {currentTransaction.number}
                    </span>
                  </div>

                  <div className="grid grid-cols-3 gap-3 border-t border-blue-200 pt-3">
                    <div className="text-center">
                      <p style={{ fontSize: '10px', color: '#64748b', marginBottom: '4px' }}>Ø§Ù„Ø³Ù†Ø©</p>
                      <p className="font-mono" style={{ fontSize: '15px', fontWeight: 700, color: '#1e40af' }}>
                        20{currentTransaction.number.substring(0, 2)}
                      </p>
                    </div>
                    <div className="text-center">
                      <p style={{ fontSize: '10px', color: '#64748b', marginBottom: '4px' }}>Ø§Ù„Ø´Ù‡Ø±</p>
                      <p style={{ fontSize: '13px', fontWeight: 600, color: '#1e40af' }}>
                        {currentTransaction.number.substring(2, 4)}
                      </p>
                    </div>
                    <div className="text-center">
                      <p style={{ fontSize: '10px', color: '#64748b', marginBottom: '4px' }}>Ø§Ù„ØªØ³Ù„Ø³Ù„</p>
                      <p className="font-mono" style={{ fontSize: '15px', fontWeight: 700, color: '#1e40af' }}>
                        {currentTransaction.number.substring(4)}
                      </p>
                    </div>
                  </div>
                </CardContent>
              </Card>
            </div>

            {/* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠØ³Ø±: Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© */}
            <div>
              <h3 className="text-base mb-3" style={{ fontWeight: 700, color: '#1f2937' }}>
                <ExternalLink className="h-4 w-4 inline ml-1" />
                Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©
              </h3>

              {currentTransaction.externalReferences?.map((ref, idx) => (
                <Card key={idx} className="card-rtl mb-3" style={{ background: '#ffffff', border: '1px solid #e5e7eb' }}>
                  <CardContent className="p-3 space-y-2">
                    <div className="flex items-center justify-between border-b border-gray-200 pb-2">
                      <span style={{ fontSize: '12px', fontWeight: 600, color: '#1f2937' }}>
                        {ref.entityName}
                      </span>
                      <Badge style={{ fontSize: '9px' }}>Ø¬Ù‡Ø© Ø®Ø§Ø±Ø¬ÙŠØ©</Badge>
                    </div>

                    <div className="grid grid-cols-2 gap-2" style={{ fontSize: '11px' }}>
                      <div>
                        <span style={{ color: '#6b7280' }}>Ø±Ù‚Ù… Ø§Ù„Ø±Ø®ØµØ©:</span>
                        <span className="font-mono mr-2" style={{ color: '#1f2937', fontWeight: 600 }}>
                          {ref.licenseNumber}
                        </span>
                      </div>
                      <div>
                        <span style={{ color: '#6b7280' }}>Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù‡Ø¬Ø±ÙŠØ©:</span>
                        <span className="font-mono mr-2" style={{ color: '#1f2937', fontWeight: 600 }}>
                          {ref.licenseYearHijri}
                        </span>
                      </div>
                      <div>
                        <span style={{ color: '#6b7280' }}>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨:</span>
                        <span className="font-mono mr-2" style={{ color: '#1f2937', fontWeight: 600 }}>
                          {ref.serviceRequestNumber}
                        </span>
                      </div>
                      <div>
                        <span style={{ color: '#6b7280' }}>Ø³Ù†Ø© Ø§Ù„Ø·Ù„Ø¨:</span>
                        <span className="font-mono mr-2" style={{ color: '#1f2937', fontWeight: 600 }}>
                          {ref.serviceRequestYear}
                        </span>
                      </div>
                    </div>
                  </CardContent>
                </Card>
              )) || (
                <div className="bg-gray-50 border border-gray-200 rounded-lg p-4 text-center">
                  <Database className="h-8 w-8 mx-auto text-gray-400 mb-2" />
                  <p style={{ fontSize: '12px', color: '#6b7280' }}>
                    Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø±Ø¬Ø¹ÙŠØ© Ø®Ø§Ø±Ø¬ÙŠØ© Ù…Ø³Ø¬Ù„Ø©
                  </p>
                </div>
              )}
            </div>
          </div>

          <DialogFooter style={{ borderTop: '2px solid #e5e7eb', paddingTop: '12px' }}>
            <Button variant="outline" onClick={() => setShowTransactionNumberDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥ØºÙ„Ø§Ù‚
            </Button>
            <Button onClick={() => safeCopyToClipboard(currentTransaction.number, 'Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©')}>
              <Download className="h-4 w-4 ml-1" />
              Ù†Ø³Ø® Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø§Ù„Ùƒ */}
      <Dialog open={showOwnerDialog} onOpenChange={setShowOwnerDialog}>
        <DialogContent className="max-w-3xl" style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}>
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontSize: '20px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{
                padding: '8px',
                background: 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)',
                borderRadius: '10px'
              }}>
                <User className="h-5 w-5" style={{ color: '#10b981' }} />
              </div>
              Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„Ø©
            </DialogTitle>
          </DialogHeader>

          <div className="space-y-4" style={{ padding: '20px 0' }}>
            <div className="grid grid-cols-2 gap-4">
              <InputWithCopy
                label="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„"
                id="owner-fullname"
                value={currentTransaction.ownerName}
                disabled
                copyable={true}
                clearable={false}
              />
              <InputWithCopy
                label="Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©"
                id="owner-id-full"
                value={currentTransaction.ownerId || ''}
                disabled
                copyable={true}
                clearable={false}
              />
              <InputWithCopy
                label="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„"
                id="owner-phone-full"
                value={currentTransaction.ownerPhone || ''}
                disabled
                copyable={true}
                clearable={false}
              />
              <InputWithCopy
                label="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"
                id="owner-email-full"
                value={currentTransaction.ownerEmail || ''}
                disabled
                copyable={true}
                clearable={false}
              />
            </div>

            <InputWithCopy
              label="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„"
              id="owner-address-full"
              value={currentTransaction.ownerAddress || ''}
              disabled
              copyable={true}
              clearable={false}
            />
          </div>

          <DialogFooter style={{ borderTop: '2px solid #e5e7eb', paddingTop: '12px' }}>
            <Button variant="outline" onClick={() => setShowOwnerDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥ØºÙ„Ø§Ù‚
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø®Ø·Ø· ÙˆØ§Ù„Ù‚Ø·Ø¹ */}
      <Dialog open={showPlanLocationDialog} onOpenChange={setShowPlanLocationDialog}>
        <DialogContent className="max-w-5xl" style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}>
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontSize: '20px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{
                padding: '8px',
                background: 'linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%)',
                borderRadius: '10px'
              }}>
                <MapPin className="h-5 w-5" style={{ color: '#8b5cf6' }} />
              </div>
              ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø®Ø·Ø· ÙˆØ§Ù„Ù‚Ø·Ø¹ ÙˆØ§Ù„Ù…ÙˆÙ‚Ø¹
            </DialogTitle>
          </DialogHeader>

          <div className="grid grid-cols-2 gap-6" style={{ padding: '20px 0' }}>
            {/* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠÙ…Ù†: Ø§Ù„Ù…Ø®Ø·Ø· ÙˆØ§Ù„Ù‚Ø·Ø¹ */}
            <div>
              <h3 className="text-base mb-3" style={{ fontWeight: 700, color: '#1f2937' }}>
                <Layers className="h-4 w-4 inline ml-1" />
                Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø®Ø·Ø·
              </h3>

              <Card className="card-rtl mb-4" style={{ background: 'linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%)', border: '2px solid #c4b5fd' }}>
                <CardContent className="p-4">
                  <div className="space-y-2">
                    <div className="flex items-center justify-between">
                      <span style={{ fontSize: '13px', color: '#64748b' }}>Ø±Ù‚Ù… Ø§Ù„Ù…Ø®Ø·Ø·:</span>
                      <span className="font-mono" style={{ fontSize: '16px', fontWeight: 700, color: '#6b21a8' }}>
                        {currentTransaction.planNumber}
                      </span>
                    </div>
                    <div className="flex items-center justify-between">
                      <span style={{ fontSize: '13px', color: '#64748b' }}>Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø¹:</span>
                      <Badge style={{ fontSize: '12px', background: '#8b5cf6', color: '#fff' }}>
                        {currentTransaction.plotNumbers?.length || 0} Ù‚Ø·Ø¹
                      </Badge>
                    </div>
                  </div>
                </CardContent>
              </Card>

              <h3 className="text-sm mb-2" style={{ fontWeight: 600, color: '#1f2937' }}>
                Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù‚Ø·Ø¹:
              </h3>
              <div className="grid grid-cols-4 gap-2">
                {(currentTransaction.plotNumbers || []).map((plot, idx) => (
                  <div 
                    key={idx}
                    className="text-center p-2 rounded-lg"
                    style={{ 
                      background: '#f3e8ff',
                      border: '1px solid #c4b5fd'
                    }}
                  >
                    <span className="font-mono" style={{ fontSize: '13px', fontWeight: 600, color: '#6b21a8' }}>
                      {plot}
                    </span>
                  </div>
                ))}
              </div>
            </div>

            {/* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠØ³Ø±: Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ */}
            <div>
              <h3 className="text-base mb-3" style={{ fontWeight: 700, color: '#1f2937' }}>
                <MapPin className="h-4 w-4 inline ml-1" />
                Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ
              </h3>

              {/* Ø±Ù…Ø² QR */}
              <div className="bg-white border-2 border-purple-200 rounded-lg p-4 mb-4 text-center">
                <div 
                  className="mx-auto mb-3"
                  style={{
                    width: '140px',
                    height: '140px',
                    background: 'linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)',
                    borderRadius: '12px',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    border: '3px solid #c4b5fd'
                  }}
                >
                  <span style={{ fontSize: '11px', color: '#6b21a8', fontWeight: 600 }}>
                    QR Code
                  </span>
                </div>
                <p style={{ fontSize: '11px', color: '#64748b' }}>
                  Ø±Ù…Ø² Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø© Ù„Ù„Ù…ÙˆÙ‚Ø¹
                </p>
              </div>

              {/* Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª */}
              <Card className="card-rtl" style={{ background: '#ffffff', border: '1px solid #e5e7eb' }}>
                <CardContent className="p-3 space-y-2">
                  <div>
                    <span style={{ fontSize: '11px', color: '#6b7280' }}>Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶:</span>
                    <span className="font-mono mr-2" style={{ fontSize: '12px', fontWeight: 600, color: '#1f2937' }}>
                      {currentTransaction.location?.lat || '0.000000'}
                    </span>
                  </div>
                  <div>
                    <span style={{ fontSize: '11px', color: '#6b7280' }}>Ø®Ø· Ø§Ù„Ø·ÙˆÙ„:</span>
                    <span className="font-mono mr-2" style={{ fontSize: '12px', fontWeight: 600, color: '#1f2937' }}>
                      {currentTransaction.location?.lng || '0.000000'}
                    </span>
                  </div>
                  <div className="border-t border-gray-200 pt-2 mt-2">
                    <span style={{ fontSize: '11px', color: '#6b7280' }}>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</span>
                    <p style={{ fontSize: '12px', fontWeight: 600, color: '#1f2937', marginTop: '4px' }}>
                      {currentTransaction.location?.address || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}
                    </p>
                  </div>
                </CardContent>
              </Card>
            </div>
          </div>

          <DialogFooter style={{ borderTop: '2px solid #e5e7eb', paddingTop: '12px' }}>
            <Button variant="outline" onClick={() => setShowPlanLocationDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥ØºÙ„Ø§Ù‚
            </Button>
            <Button>
              <MapPin className="h-4 w-4 ml-1" />
              ÙØªØ­ ÙÙŠ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Ù†Ø§ÙØ°Ø© Ø§Ù„Ù†ÙˆØ¹ ÙˆØ§Ù„ØªØµÙ†ÙŠÙ */}
      <Dialog open={showTypeDialog} onOpenChange={setShowTypeDialog}>
        <DialogContent className="max-w-2xl" style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}>
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontSize: '20px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{
                padding: '8px',
                background: 'linear-gradient(135deg, #fed7aa 0%, #fdba74 100%)',
                borderRadius: '10px'
              }}>
                <Building className="h-5 w-5" style={{ color: '#f59e0b' }} />
              </div>
              ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù†ÙˆØ¹ ÙˆØ§Ù„ØªØµÙ†ÙŠÙ
            </DialogTitle>
          </DialogHeader>

          <div className="space-y-4" style={{ padding: '20px 0' }}>
            <Card className="card-rtl" style={{ background: 'linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%)', border: '2px solid #fdba74' }}>
              <CardContent className="p-4 space-y-3">
                <div className="flex items-center justify-between">
                  <span style={{ fontSize: '13px', color: '#64748b' }}>Ø§Ù„Ù†ÙˆØ¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ:</span>
                  <Badge style={{ fontSize: '13px', background: '#f59e0b', color: '#fff', padding: '4px 12px' }}>
                    {currentTransaction.type}
                  </Badge>
                </div>
                <div className="flex items-center justify-between border-t border-orange-200 pt-3">
                  <span style={{ fontSize: '13px', color: '#64748b' }}>Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ:</span>
                  <span style={{ fontSize: '14px', fontWeight: 600, color: '#9a3412' }}>
                    {currentTransaction.mainCategory}
                  </span>
                </div>
                <div className="flex items-center justify-between">
                  <span style={{ fontSize: '13px', color: '#64748b' }}>Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„ÙØ±Ø¹ÙŠ:</span>
                  <span style={{ fontSize: '14px', fontWeight: 600, color: '#9a3412' }}>
                    {currentTransaction.subCategory}
                  </span>
                </div>
              </CardContent>
            </Card>

            <div className="bg-orange-50 border border-orange-200 rounded-lg p-4">
              <h4 style={{ fontSize: '13px', fontWeight: 600, color: '#9a3412', marginBottom: '8px' }}>
                Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©:
              </h4>
              <p style={{ fontSize: '12px', color: '#6b7280', lineHeight: '1.6' }}>
                Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ù…ØµÙ†ÙØ© Ø¶Ù…Ù† {currentTransaction.type} ÙÙŠ Ø§Ù„Ù‚Ø³Ù… {currentTransaction.mainCategory}.
                Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„ÙØ±Ø¹ÙŠ Ø§Ù„Ù…Ø­Ø¯Ø¯ Ù‡Ùˆ {currentTransaction.subCategory}.
              </p>
            </div>
          </div>

          <DialogFooter style={{ borderTop: '2px solid #e5e7eb', paddingTop: '12px' }}>
            <Button variant="outline" onClick={() => setShowTypeDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥ØºÙ„Ø§Ù‚
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ§Ø±ÙŠØ® */}
      <Dialog open={showDateDialog} onOpenChange={setShowDateDialog}>
        <DialogContent className="max-w-xl" style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}>
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontSize: '20px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{
                padding: '8px',
                background: 'linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%)',
                borderRadius: '10px'
              }}>
                <Calendar className="h-5 w-5" style={{ color: '#ec4899' }} />
              </div>
              ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø¥Ù†Ø´Ø§Ø¡
            </DialogTitle>
          </DialogHeader>

          <div className="space-y-4" style={{ padding: '20px 0' }}>
            <Card className="card-rtl" style={{ background: 'linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%)', border: '2px solid #f9a8d4' }}>
              <CardContent className="p-4 space-y-3">
                <div className="flex items-center justify-between">
                  <span style={{ fontSize: '13px', color: '#64748b' }}>Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª:</span>
                  <span className="font-mono" style={{ fontSize: '14px', fontWeight: 600, color: '#9f1239' }}>
                    {currentTransaction.createdDateTime}
                  </span>
                </div>
                <div className="flex items-center justify-between border-t border-pink-200 pt-3">
                  <span style={{ fontSize: '13px', color: '#64748b' }}>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡:</span>
                  <span className="font-mono" style={{ fontSize: '15px', fontWeight: 700, color: '#9f1239' }}>
                    {currentTransaction.date}
                  </span>
                </div>
                <div className="flex items-center justify-between">
                  <span style={{ fontSize: '13px', color: '#64748b' }}>Ø§Ù„Ù…Ù†Ø´Ø¦:</span>
                  <Badge style={{ fontSize: '12px', background: '#ec4899', color: '#fff' }}>
                    {currentTransaction.createdBy}
                  </Badge>
                </div>
                <div className="flex items-center justify-between">
                  <span style={{ fontSize: '13px', color: '#64748b' }}>Ø§Ù„ÙØªØ±Ø©:</span>
                  <span style={{ fontSize: '13px', fontWeight: 600, color: '#9f1239' }}>
                    {currentTransaction.number.substring(2, 4)}/20{currentTransaction.number.substring(0, 2)}
                  </span>
                </div>
              </CardContent>
            </Card>
          </div>

          <DialogFooter style={{ borderTop: '2px solid #e5e7eb', paddingTop: '12px' }}>
            <Button variant="outline" onClick={() => setShowDateDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥ØºÙ„Ø§Ù‚
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Ù†Ø§ÙØ°Ø© Ø§Ù„Ø­Ø§Ù„Ø© */}
      <Dialog open={showStatusDialog} onOpenChange={setShowStatusDialog}>
        <DialogContent className="max-w-3xl" style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}>
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontSize: '20px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{
                padding: '8px',
                background: transactionStatuses[currentTransaction.status]?.bgColor || 'rgba(107, 114, 128, 0.1)',
                borderRadius: '10px'
              }}>
                {React.createElement(transactionStatuses[currentTransaction.status]?.icon || AlertCircle, {
                  className: "h-5 w-5",
                  style: { color: transactionStatuses[currentTransaction.status]?.color || '#6b7280' }
                })}
              </div>
              ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø©
            </DialogTitle>
          </DialogHeader>

          <div className="space-y-4" style={{ padding: '20px 0' }}>
            <Card className="card-rtl" style={{ 
              background: transactionStatuses[currentTransaction.status]?.bgColor || 'rgba(107, 114, 128, 0.1)', 
              border: `2px solid ${transactionStatuses[currentTransaction.status]?.color || '#6b7280'}` 
            }}>
              <CardContent className="p-4 space-y-3">
                <div className="flex items-center justify-between">
                  <span style={{ fontSize: '13px', color: '#64748b' }}>Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:</span>
                  <Badge style={{ 
                    fontSize: '14px', 
                    background: transactionStatuses[currentTransaction.status]?.color || '#6b7280', 
                    color: '#fff',
                    padding: '6px 14px'
                  }}>
                    {transactionStatuses[currentTransaction.status]?.label || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}
                  </Badge>
                </div>
                
                <div className="border-t pt-3" style={{ borderColor: transactionStatuses[currentTransaction.status]?.color + '40' || '#6b728040' }}>
                  <p style={{ fontSize: '12px', color: '#64748b', marginBottom: '4px' }}>Ø§Ù„ÙˆØµÙ Ø§Ù„Ù…Ø®ØªØµØ±:</p>
                  <p style={{ fontSize: '13px', fontWeight: 600, color: '#1f2937' }}>
                    {transactionStatuses[currentTransaction.status]?.shortDesc || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}
                  </p>
                </div>

                <div className="border-t pt-3" style={{ borderColor: transactionStatuses[currentTransaction.status]?.color + '40' || '#6b728040' }}>
                  <p style={{ fontSize: '12px', color: '#64748b', marginBottom: '4px' }}>Ø§Ù„ÙˆØµÙ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ:</p>
                  <p style={{ fontSize: '12px', color: '#6b7280', lineHeight: '1.6' }}>
                    {transactionStatuses[currentTransaction.status]?.detailedDesc || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ ØªÙØµÙŠÙ„ÙŠ'}
                  </p>
                </div>

                {currentTransaction.statusReason && (
                  <div className="border-t pt-3" style={{ borderColor: transactionStatuses[currentTransaction.status]?.color + '40' || '#6b728040' }}>
                    <p style={{ fontSize: '12px', color: '#64748b', marginBottom: '4px' }}>Ø§Ù„Ø³Ø¨Ø¨:</p>
                    <p style={{ fontSize: '13px', fontWeight: 600, color: '#ef4444' }}>
                      {currentTransaction.statusReason}
                    </p>
                  </div>
                )}

                <div className="grid grid-cols-2 gap-3 border-t pt-3" style={{ borderColor: transactionStatuses[currentTransaction.status]?.color + '40' || '#6b728040' }}>
                  <div>
                    <p style={{ fontSize: '11px', color: '#64748b', marginBottom: '4px' }}>ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨ÙˆØ§Ø³Ø·Ø©:</p>
                    <p style={{ fontSize: '12px', fontWeight: 600, color: '#1f2937' }}>
                      {currentTransaction.statusBy}
                    </p>
                  </div>
                  <div>
                    <p style={{ fontSize: '11px', color: '#64748b', marginBottom: '4px' }}>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ­Ø¯ÙŠØ«:</p>
                    <p className="font-mono" style={{ fontSize: '12px', fontWeight: 600, color: '#1f2937' }}>
                      {currentTransaction.statusDate}
                    </p>
                  </div>
                </div>
              </CardContent>
            </Card>
          </div>

          <DialogFooter style={{ borderTop: '2px solid #e5e7eb', paddingTop: '12px' }}>
            <Button variant="outline" onClick={() => setShowStatusDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥ØºÙ„Ø§Ù‚
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Ù†Ø§ÙØ°Ø© Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² */}
      <Dialog open={showProgressDialog} onOpenChange={setShowProgressDialog}>
        <DialogContent className="max-w-4xl" style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}>
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontSize: '20px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{
                padding: '8px',
                background: 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)',
                borderRadius: '10px'
              }}>
                <TrendingUp className="h-5 w-5" style={{ color: '#10b981' }} />
              </div>
              ØªÙØ§ØµÙŠÙ„ Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²
            </DialogTitle>
          </DialogHeader>

          <div className="space-y-6" style={{ padding: '20px 0' }}>
            {/* Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© */}
            <Card className="card-rtl" style={{ background: 'linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)', border: '2px solid #6ee7b7' }}>
              <CardContent className="p-6 text-center">
                <p style={{ fontSize: '13px', color: '#64748b', marginBottom: '8px' }}>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</p>
                <div 
                  className="font-mono mx-auto"
                  style={{ 
                    fontSize: '48px', 
                    fontWeight: 700, 
                    color: '#065f46',
                    background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                    WebkitBackgroundClip: 'text',
                    WebkitTextFillColor: 'transparent',
                    width: 'fit-content'
                  }}
                >
                  {currentTransaction.progress}%
                </div>
                <Progress value={currentTransaction.progress} className="mt-4" style={{ height: '12px' }} />
              </CardContent>
            </Card>

            {/* Ø¬Ø¯ÙˆÙ„ Ù…Ø±Ø§Ø­Ù„ Ø§Ù„ØªÙ†ÙÙŠØ° */}
            <div>
              <h3 className="text-base mb-3" style={{ fontWeight: 700, color: '#1f2937' }}>
                <BarChart3 className="h-4 w-4 inline ml-1" />
                Ù…Ø±Ø§Ø­Ù„ Ø§Ù„ØªÙ†ÙÙŠØ° (8 Ù…Ø±Ø§Ø­Ù„)
              </h3>

              <Table className="table-rtl">
                <TableHeader>
                  <TableRow>
                    <TableHead className="text-right" style={{ fontFamily: 'Tajawal, sans-serif' }}>Ø§Ù„Ù…Ø±Ø­Ù„Ø©</TableHead>
                    <TableHead className="text-right" style={{ fontFamily: 'Tajawal, sans-serif' }}>Ø§Ù„ÙˆØµÙ</TableHead>
                    <TableHead className="text-right" style={{ fontFamily: 'Tajawal, sans-serif' }}>Ø§Ù„Ù†Ø³Ø¨Ø©</TableHead>
                    <TableHead className="text-right" style={{ fontFamily: 'Tajawal, sans-serif' }}>Ø§Ù„Ø­Ø§Ù„Ø©</TableHead>
                  </TableRow>
                </TableHeader>
                <TableBody>
                  {[
                    { phase: 'Ù¡. Ø§Ù„ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø£ÙˆÙ„ÙŠ', desc: 'Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', percent: 100, status: 'completed' },
                    { phase: 'Ù¢. Ø§Ù„ØªÙˆØ«ÙŠÙ‚', desc: 'ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ©', percent: 100, status: 'completed' },
                    { phase: 'Ù£. Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„ÙÙ†ÙŠ', desc: 'Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙˆØ§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…ÙŠØ¯Ø§Ù†ÙŠØ©', percent: 85, status: 'in-progress' },
                    { phase: 'Ù¤. Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª', desc: 'Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª Ø§Ù„Ù„Ø§Ø²Ù…Ø©', percent: 60, status: 'in-progress' },
                    { phase: 'Ù¥. Ø§Ù„ØªÙ†ÙÙŠØ°', desc: 'Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ ØªÙ†ÙÙŠØ° Ø§Ù„Ù…Ø´Ø±ÙˆØ¹', percent: 40, status: 'in-progress' },
                    { phase: 'Ù¦. Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©', desc: 'Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¬ÙˆØ¯Ø© Ø§Ù„ØªÙ†ÙÙŠØ°', percent: 0, status: 'pending' },
                    { phase: 'Ù§. Ø§Ù„ØªØ³Ù„ÙŠÙ…', desc: 'ØªØ³Ù„ÙŠÙ… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù„Ù„Ù…Ø§Ù„Ùƒ', percent: 0, status: 'pending' },
                    { phase: 'Ù¨. Ø§Ù„Ø¥ØºÙ„Ø§Ù‚', desc: 'Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙˆØ§Ù„Ø£Ø±Ø´ÙØ©', percent: 0, status: 'pending' }
                  ].map((phase, idx) => (
                    <TableRow key={idx}>
                      <TableCell className="text-right" style={{ fontFamily: 'Tajawal, sans-serif', fontSize: '12px', fontWeight: 600 }}>
                        {phase.phase}
                      </TableCell>
                      <TableCell className="text-right" style={{ fontFamily: 'Tajawal, sans-serif', fontSize: '11px', color: '#6b7280' }}>
                        {phase.desc}
                      </TableCell>
                      <TableCell className="text-right">
                        <span className="font-mono" style={{ fontSize: '13px', fontWeight: 600, color: phase.status === 'completed' ? '#10b981' : phase.status === 'in-progress' ? '#f59e0b' : '#6b7280' }}>
                          {phase.percent}%
                        </span>
                      </TableCell>
                      <TableCell className="text-right">
                        <Badge style={{ 
                          fontSize: '10px',
                          background: phase.status === 'completed' ? '#10b981' : phase.status === 'in-progress' ? '#f59e0b' : '#6b7280',
                          color: '#fff'
                        }}>
                          {phase.status === 'completed' ? 'Ù…ÙƒØªÙ…Ù„' : phase.status === 'in-progress' ? 'Ù‚ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„' : 'Ù‚Ø§Ø¯Ù…'}
                        </Badge>
                      </TableCell>
                    </TableRow>
                  ))}
                </TableBody>
              </Table>
            </div>
          </div>

          <DialogFooter style={{ borderTop: '2px solid #e5e7eb', paddingTop: '12px' }}>
            <Button variant="outline" onClick={() => setShowProgressDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥ØºÙ„Ø§Ù‚
            </Button>
            <Button>
              <Printer className="h-4 w-4 ml-1" />
              Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* Ù†ÙˆØ§ÙØ° Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø³Ø±ÙŠØ¹Ø© */}
      
      {/* 1. Ù†Ø§ÙØ°Ø© Ø£ØªØ¹Ø§Ø¨ Ø§Ù„Ù…ÙƒØªØ¨ */}
      <Dialog open={showOfficeFeesDialog} onOpenChange={setShowOfficeFeesDialog}>
        <DialogContent className="max-w-5xl" style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}>
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontSize: '20px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{
                padding: '8px',
                background: 'linear-gradient(135deg, #fef3c7 0%, #fde047 100%)',
                borderRadius: '10px'
              }}>
                <DollarSign className="h-5 w-5" style={{ color: '#f59e0b' }} />
              </div>
              Ø£ØªØ¹Ø§Ø¨ Ø§Ù„Ù…ÙƒØªØ¨ - Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© {currentTransaction?.number}
            </DialogTitle>
          </DialogHeader>

          <div className="grid grid-cols-2 gap-6" style={{ padding: '20px 0' }}>
            {/* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠÙ…Ù†: Ù…Ù„Ø®Øµ Ø§Ù„Ø£ØªØ¹Ø§Ø¨ */}
            <div>
              <h3 className="text-base mb-3" style={{ fontWeight: 700, color: '#1f2937' }}>
                <Calculator className="h-4 w-4 inline ml-1" />
                Ù…Ù„Ø®Øµ Ø§Ù„Ø£ØªØ¹Ø§Ø¨
              </h3>

              <Card className="card-rtl mb-4" style={{ background: 'linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%)', border: '2px solid #fbbf24' }}>
                <CardContent className="p-4 space-y-3">
                  <div className="flex items-center justify-between">
                    <span style={{ fontSize: '13px', color: '#64748b' }}>Ø§Ù„Ø£ØªØ¹Ø§Ø¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©:</span>
                    <span className="font-mono" style={{ fontSize: '16px', fontWeight: 700, color: '#92400e' }}>
                      50,000 Ø±ÙŠØ§Ù„
                    </span>
                  </div>
                  <div className="flex items-center justify-between border-t border-yellow-200 pt-2">
                    <span style={{ fontSize: '13px', color: '#64748b' }}>Ø±Ø³ÙˆÙ… Ø¥Ø¶Ø§ÙÙŠØ©:</span>
                    <span className="font-mono" style={{ fontSize: '14px', fontWeight: 600, color: '#92400e' }}>
                      12,000 Ø±ÙŠØ§Ù„
                    </span>
                  </div>
                  <div className="flex items-center justify-between">
                    <span style={{ fontSize: '13px', color: '#64748b' }}>Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© (15%):</span>
                    <span className="font-mono" style={{ fontSize: '14px', fontWeight: 600, color: '#92400e' }}>
                      9,300 Ø±ÙŠØ§Ù„
                    </span>
                  </div>
                  <div className="flex items-center justify-between border-t-2 border-yellow-400 pt-3 mt-3">
                    <span style={{ fontSize: '14px', fontWeight: 700, color: '#1f2937' }}>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
                    <span className="font-mono" style={{ fontSize: '18px', fontWeight: 700, color: '#b45309' }}>
                      71,300 Ø±ÙŠØ§Ù„
                    </span>
                  </div>
                </CardContent>
              </Card>

              <h3 className="text-sm mb-2" style={{ fontWeight: 600, color: '#1f2937' }}>
                Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹Ø§Øª:
              </h3>
              <div className="space-y-2">
                <div className="flex items-center justify-between p-2 rounded" style={{ background: '#d1fae5' }}>
                  <span style={{ fontSize: '12px', color: '#065f46' }}>Ø§Ù„Ù…Ø¯ÙÙˆØ¹:</span>
                  <span className="font-mono" style={{ fontSize: '13px', fontWeight: 600, color: '#065f46' }}>
                    30,000 Ø±ÙŠØ§Ù„
                  </span>
                </div>
                <div className="flex items-center justify-between p-2 rounded" style={{ background: '#fef3c7' }}>
                  <span style={{ fontSize: '12px', color: '#92400e' }}>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:</span>
                  <span className="font-mono" style={{ fontSize: '13px', fontWeight: 600, color: '#92400e' }}>
                    41,300 Ø±ÙŠØ§Ù„
                  </span>
                </div>
              </div>
            </div>

            {/* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠØ³Ø±: ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø£ØªØ¹Ø§Ø¨ */}
            <div>
              <h3 className="text-base mb-3" style={{ fontWeight: 700, color: '#1f2937' }}>
                <Receipt className="h-4 w-4 inline ml-1" />
                ØªÙØµÙŠÙ„ Ø§Ù„Ø£ØªØ¹Ø§Ø¨
              </h3>

              <Table className="table-rtl" style={{ fontSize: '12px' }}>
                <TableHeader>
                  <TableRow>
                    <TableHead className="text-right">Ø§Ù„Ø¨Ù†Ø¯</TableHead>
                    <TableHead className="text-right">Ø§Ù„Ù…Ø¨Ù„Øº</TableHead>
                  </TableRow>
                </TableHeader>
                <TableBody>
                  <TableRow>
                    <TableCell className="text-right">Ø±Ø³ÙˆÙ… Ø§Ù„Ø¥Ø´Ø±Ø§Ù</TableCell>
                    <TableCell className="text-right font-mono">25,000</TableCell>
                  </TableRow>
                  <TableRow>
                    <TableCell className="text-right">Ø±Ø³ÙˆÙ… Ø§Ù„ØªØµÙ…ÙŠÙ…</TableCell>
                    <TableCell className="text-right font-mono">15,000</TableCell>
                  </TableRow>
                  <TableRow>
                    <TableCell className="text-right">Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</TableCell>
                    <TableCell className="text-right font-mono">10,000</TableCell>
                  </TableRow>
                  <TableRow>
                    <TableCell className="text-right">Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ±Ø§Ø®ÙŠØµ</TableCell>
                    <TableCell className="text-right font-mono">8,000</TableCell>
                  </TableRow>
                  <TableRow>
                    <TableCell className="text-right">Ø±Ø³ÙˆÙ… Ø§Ø³ØªØ´Ø§Ø±ÙŠØ©</TableCell>
                    <TableCell className="text-right font-mono">4,000</TableCell>
                  </TableRow>
                </TableBody>
              </Table>
            </div>
          </div>

          <DialogFooter style={{ borderTop: '2px solid #e5e7eb', paddingTop: '12px' }}>
            <Button variant="outline" onClick={() => setShowOfficeFeesDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥ØºÙ„Ø§Ù‚
            </Button>
            <Button style={{ background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)' }}>
              <Printer className="h-4 w-4 ml-1" />
              Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* 2. Ù†Ø§ÙØ°Ø© Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø§Ù„Ùƒ */}
      <Dialog open={showMessageOwnerDialog} onOpenChange={setShowMessageOwnerDialog}>
        <DialogContent className="max-w-3xl" style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}>
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontSize: '20px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{
                padding: '8px',
                background: 'linear-gradient(135deg, #dbeafe 0%, #93c5fd 100%)',
                borderRadius: '10px'
              }}>
                <Mail className="h-5 w-5" style={{ color: '#2563eb' }} />
              </div>
              Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø§Ù„Ùƒ - {currentTransaction?.ownerName}
            </DialogTitle>
          </DialogHeader>

          <div className="space-y-4" style={{ padding: '20px 0' }}>
            <div className="grid grid-cols-2 gap-4">
              <InputWithCopy
                label="Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ù„Ùƒ"
                id="msg-owner-name"
                value={currentTransaction?.ownerName || ''}
                disabled
                copyable={false}
                clearable={false}
              />
              <InputWithCopy
                label="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„"
                id="msg-owner-phone"
                value={currentTransaction?.ownerPhone || ''}
                disabled
                copyable={true}
                clearable={false}
              />
            </div>

            <SelectWithCopy
              label="Ù‚Ù†Ø§Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"
              id="msg-channel"
              value=""
              onChange={() => {}}
              options={[
                { value: 'sms', label: 'Ø±Ø³Ø§Ù„Ø© Ù†ØµÙŠØ© (SMS)' },
                { value: 'whatsapp', label: 'ÙˆØ§ØªØ³Ø§Ø¨' },
                { value: 'email', label: 'Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ' },
                { value: 'call', label: 'Ù…ÙƒØ§Ù„Ù…Ø© Ù‡Ø§ØªÙÙŠØ©' }
              ]}
              copyable={false}
              clearable={true}
            />

            <InputWithCopy
              label="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©"
              id="msg-subject"
              value=""
              onChange={() => {}}
              placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©"
              copyable={false}
              clearable={true}
            />

            <div>
              <label style={{ fontSize: '13px', fontWeight: 600, color: '#374151', display: 'block', marginBottom: '6px' }}>
                Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø© *
              </label>
              <textarea
                rows={6}
                className="input-field"
                style={{ fontFamily: 'Tajawal, sans-serif', width: '100%' }}
                placeholder="Ø§ÙƒØªØ¨ Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù‡Ù†Ø§..."
              />
            </div>

            <div className="grid grid-cols-3 gap-3">
              <Button variant="outline" style={{ fontSize: '11px' }}>
                <FileText className="h-3 w-3 ml-1" />
                Ø¥Ø±ÙØ§Ù‚ Ù…Ù„Ù
              </Button>
              <Button variant="outline" style={{ fontSize: '11px' }}>
                <ImageIcon className="h-3 w-3 ml-1" />
                Ø¥Ø±ÙØ§Ù‚ ØµÙˆØ±Ø©
              </Button>
              <Button variant="outline" style={{ fontSize: '11px' }}>
                <Paperclip className="h-3 w-3 ml-1" />
                Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
              </Button>
            </div>
          </div>

          <DialogFooter style={{ borderTop: '2px solid #e5e7eb', paddingTop: '12px' }}>
            <Button variant="outline" onClick={() => setShowMessageOwnerDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥Ù„ØºØ§Ø¡
            </Button>
            <Button style={{ background: 'linear-gradient(135deg, #2563eb 0%, #1e40af 100%)' }}>
              <Send className="h-4 w-4 ml-1" />
              Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¢Ù†
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* 3. Ù†Ø§ÙØ°Ø© Ø¥Ø±Ø³Ø§Ù„ Ù…Ù„ÙØ§Øª */}
      <Dialog open={showSendFilesDialog} onOpenChange={setShowSendFilesDialog}>
        <DialogContent className="max-w-4xl" style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}>
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontSize: '20px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{
                padding: '8px',
                background: 'linear-gradient(135deg, #e9d5ff 0%, #d8b4fe 100%)',
                borderRadius: '10px'
              }}>
                <Paperclip className="h-5 w-5" style={{ color: '#a855f7' }} />
              </div>
              Ø¥Ø±Ø³Ø§Ù„ Ù…Ù„ÙØ§Øª Ù„Ù„Ù…Ø¹Ø§Ù…Ù„Ø© {currentTransaction?.number}
            </DialogTitle>
          </DialogHeader>

          <div className="grid grid-cols-2 gap-6" style={{ padding: '20px 0' }}>
            {/* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠÙ…Ù†: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø³ØªÙ„Ù… */}
            <div>
              <h3 className="text-base mb-3" style={{ fontWeight: 700, color: '#1f2937' }}>
                <Users className="h-4 w-4 inline ml-1" />
                ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø³ØªÙ„Ù…
              </h3>

              <div className="space-y-3">
                <SelectWithCopy
                  label="Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³ØªÙ„Ù…"
                  id="recipient-type"
                  value=""
                  onChange={() => {}}
                  options={[
                    { value: 'owner', label: 'Ø§Ù„Ù…Ø§Ù„Ùƒ' },
                    { value: 'employee', label: 'Ù…ÙˆØ¸Ù' },
                    { value: 'entity', label: 'Ø¬Ù‡Ø© Ø®Ø§Ø±Ø¬ÙŠØ©' },
                    { value: 'contractor', label: 'Ù…Ù‚Ø§ÙˆÙ„' }
                  ]}
                  copyable={false}
                  clearable={true}
                />

                <SelectWithCopy
                  label="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù…"
                  id="recipient-name"
                  value=""
                  onChange={() => {}}
                  options={[
                    { value: 'owner1', label: currentTransaction?.ownerName || '' },
                    { value: 'emp1', label: 'Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø£Ø­Ù…Ø¯ Ø§Ù„Ø¹Ù„ÙŠ' },
                    { value: 'emp2', label: 'Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³Ø¹ÙŠØ¯' }
                  ]}
                  copyable={false}
                  clearable={true}
                />

                <SelectWithCopy
                  label="Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"
                  id="send-method"
                  value=""
                  onChange={() => {}}
                  options={[
                    { value: 'email', label: 'Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ' },
                    { value: 'whatsapp', label: 'ÙˆØ§ØªØ³Ø§Ø¨' },
                    { value: 'portal', label: 'Ø§Ù„Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©' },
                    { value: 'hand', label: 'ØªØ³Ù„ÙŠÙ… ÙŠØ¯ÙˆÙŠ' }
                  ]}
                  copyable={false}
                  clearable={true}
                />

                <InputWithCopy
                  label="Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹"
                  id="send-subject"
                  value=""
                  onChange={() => {}}
                  placeholder="Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"
                  copyable={false}
                  clearable={true}
                />
              </div>
            </div>

            {/* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠØ³Ø±: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„ÙØ§Øª */}
            <div>
              <h3 className="text-base mb-3" style={{ fontWeight: 700, color: '#1f2937' }}>
                <FileCheck className="h-4 w-4 inline ml-1" />
                Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø±Ø§Ø¯ Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§
              </h3>

              <div 
                className="border-2 border-dashed border-purple-300 rounded-lg p-6 text-center mb-4"
                style={{ background: '#faf5ff', minHeight: '200px', display: 'flex', alignItems: 'center', justifyContent: 'center', flexDirection: 'column' }}
              >
                <Paperclip className="h-12 w-12 text-purple-400 mb-3" />
                <p style={{ fontSize: '14px', color: '#6b7280', marginBottom: '8px' }}>
                  Ø§Ø³Ø­Ø¨ Ø§Ù„Ù…Ù„ÙØ§Øª Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ø¶ØºØ· Ù„Ù„ØªØ­Ø¯ÙŠØ¯
                </p>
                <Button variant="outline" style={{ fontSize: '12px' }}>
                  <FolderOpen className="h-4 w-4 ml-1" />
                  Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„ÙØ§Øª
                </Button>
              </div>

              <div className="bg-purple-50 border border-purple-200 rounded-lg p-3">
                <p style={{ fontSize: '11px', color: '#6b7280', lineHeight: '1.6' }}>
                  <strong>Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø©:</strong> PDF, DOC, DOCX, XLS, XLSX, JPG, PNG
                  <br />
                  <strong>Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø£Ù‚ØµÙ‰:</strong> 25 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª Ù„ÙƒÙ„ Ù…Ù„Ù
                </p>
              </div>
            </div>
          </div>

          <DialogFooter style={{ borderTop: '2px solid #e5e7eb', paddingTop: '12px' }}>
            <Button variant="outline" onClick={() => setShowSendFilesDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥Ù„ØºØ§Ø¡
            </Button>
            <Button style={{ background: 'linear-gradient(135deg, #a855f7 0%, #9333ea 100%)' }}>
              <Send className="h-4 w-4 ml-1" />
              Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„ÙØ§Øª
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* 4. Ù†Ø§ÙØ°Ø© Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª */}
      <Dialog open={showPauseDialog} onOpenChange={setShowPauseDialog}>
        <DialogContent className="max-w-2xl" style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}>
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontSize: '20px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{
                padding: '8px',
                background: 'linear-gradient(135deg, #fef3c7 0%, #fde047 100%)',
                borderRadius: '10px'
              }}>
                <AlertCircle className="h-5 w-5" style={{ color: '#f59e0b' }} />
              </div>
              Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª Ù„Ù„Ù…Ø¹Ø§Ù…Ù„Ø© {currentTransaction?.number}
            </DialogTitle>
          </DialogHeader>

          <div className="space-y-4" style={{ padding: '20px 0' }}>
            <div className="bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4">
              <div className="flex items-start gap-3">
                <AlertCircle className="h-5 w-5 text-yellow-600 mt-0.5" />
                <div>
                  <p style={{ fontSize: '13px', fontWeight: 600, color: '#92400e', marginBottom: '4px' }}>
                    ØªÙ†Ø¨ÙŠÙ‡ Ù…Ù‡Ù…
                  </p>
                  <p style={{ fontSize: '12px', color: '#6b7280', lineHeight: '1.6' }}>
                    Ø³ÙŠØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ù…Ø¤Ù‚ØªØ§Ù‹. ÙŠØ¬Ø¨ ØªØ­Ø¯ÙŠØ¯ Ø³Ø¨Ø¨ Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù ÙˆØ§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©.
                  </p>
                </div>
              </div>
            </div>

            <SelectWithCopy
              label="Ø³Ø¨Ø¨ Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø¤Ù‚Øª *"
              id="pause-reason"
              value=""
              onChange={() => {}}
              options={[
                { value: 'waiting-owner', label: 'ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø±Ø¯ Ø§Ù„Ù…Ø§Ù„Ùƒ' },
                { value: 'waiting-docs', label: 'ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ù…Ø³ØªÙ†Ø¯Ø§Øª' },
                { value: 'waiting-approval', label: 'ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ù…ÙˆØ§ÙÙ‚Ø© Ø¬Ù‡Ø©' },
                { value: 'technical-issue', label: 'Ù…Ø´ÙƒÙ„Ø© ÙÙ†ÙŠØ©' },
                { value: 'financial-issue', label: 'Ù…Ø´ÙƒÙ„Ø© Ù…Ø§Ù„ÙŠØ©' },
                { value: 'other', label: 'Ø³Ø¨Ø¨ Ø¢Ø®Ø±' }
              ]}
              copyable={false}
              clearable={true}
            />

            <div>
              <label style={{ fontSize: '13px', fontWeight: 600, color: '#374151', display: 'block', marginBottom: '6px' }}>
                ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³Ø¨Ø¨ *
              </label>
              <textarea
                rows={4}
                className="input-field"
                style={{ fontFamily: 'Tajawal, sans-serif', width: '100%' }}
                placeholder="Ø§Ø°ÙƒØ± ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³Ø¨Ø¨ Ø¨Ø¯Ù‚Ø©..."
              />
            </div>

            <div className="grid grid-cols-2 gap-4">
              <InputWithCopy
                label="Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø© (Ø¨Ø§Ù„Ø£ÙŠØ§Ù…)"
                id="pause-duration"
                value=""
                onChange={() => {}}
                placeholder="Ù…Ø«Ø§Ù„: 7"
                type="number"
                copyable={false}
                clearable={true}
              />
              <InputWithCopy
                label="ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹"
                id="pause-followup-date"
                value=""
                onChange={() => {}}
                type="date"
                copyable={false}
                clearable={true}
              />
            </div>

            <div>
              <label style={{ fontSize: '13px', fontWeight: 600, color: '#374151', display: 'flex', alignItems: 'center', gap: '4px', marginBottom: '8px' }}>
                <Bell className="h-4 w-4" />
                ØªÙ†Ø¨ÙŠÙ‡ ØªÙ„Ù‚Ø§Ø¦ÙŠ
              </label>
              <EnhancedSwitch
                id="pause-reminder"
                checked={false}
                onCheckedChange={() => {}}
                label="Ø¥Ø±Ø³Ø§Ù„ ØªØ°ÙƒÙŠØ± Ù‚Ø¨Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©"
                size="sm"
              />
            </div>
          </div>

          <DialogFooter style={{ borderTop: '2px solid #e5e7eb', paddingTop: '12px' }}>
            <Button variant="outline" onClick={() => setShowPauseDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥Ù„ØºØ§Ø¡
            </Button>
            <Button style={{ background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)' }}>
              <AlertCircle className="h-4 w-4 ml-1" />
              Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* 5. Ù†Ø§ÙØ°Ø© Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© */}
      <Dialog open={showCancelDialog} onOpenChange={setShowCancelDialog}>
        <DialogContent className="max-w-2xl" style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}>
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontSize: '20px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{
                padding: '8px',
                background: 'linear-gradient(135deg, #fee2e2 0%, #fecaca 100%)',
                borderRadius: '10px'
              }}>
                <X className="h-5 w-5" style={{ color: '#ef4444' }} />
              </div>
              Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© {currentTransaction?.number}
            </DialogTitle>
          </DialogHeader>

          <div className="space-y-4" style={{ padding: '20px 0' }}>
            <div className="bg-red-50 border-2 border-red-200 rounded-lg p-4">
              <div className="flex items-start gap-3">
                <AlertCircle className="h-5 w-5 text-red-600 mt-0.5" />
                <div>
                  <p style={{ fontSize: '13px', fontWeight: 700, color: '#991b1b', marginBottom: '4px' }}>
                    âš ï¸ ØªØ­Ø°ÙŠØ±: Ø¥Ø¬Ø±Ø§Ø¡ Ø­Ø±Ø¬
                  </p>
                  <p style={{ fontSize: '12px', color: '#6b7280', lineHeight: '1.6' }}>
                    Ø³ÙŠØªÙ… Ø¥Ù„ØºØ§Ø¡ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹. Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡ Ø¥Ù„Ø§ Ø¨Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ†Ø´ÙŠØ· Ø§Ù„ÙŠØ¯ÙˆÙŠØ©.
                  </p>
                </div>
              </div>
            </div>

            <SelectWithCopy
              label="Ø³Ø¨Ø¨ Ø§Ù„Ø¥Ù„ØºØ§Ø¡ *"
              id="cancel-reason"
              value=""
              onChange={() => {}}
              options={[
                { value: 'owner-request', label: 'Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ù…Ø§Ù„Ùƒ' },
                { value: 'payment-issue', label: 'Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø¯ÙØ¹' },
                { value: 'legal-issue', label: 'Ù…Ø´ÙƒÙ„Ø© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©' },
                { value: 'duplicate', label: 'Ù…Ø¹Ø§Ù…Ù„Ø© Ù…ÙƒØ±Ø±Ø©' },
                { value: 'wrong-data', label: 'Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø©' },
                { value: 'other', label: 'Ø³Ø¨Ø¨ Ø¢Ø®Ø±' }
              ]}
              copyable={false}
              clearable={true}
            />

            <div>
              <label style={{ fontSize: '13px', fontWeight: 600, color: '#374151', display: 'block', marginBottom: '6px' }}>
                ØªÙØ§ØµÙŠÙ„ Ø³Ø¨Ø¨ Ø§Ù„Ø¥Ù„ØºØ§Ø¡ *
              </label>
              <textarea
                rows={5}
                className="input-field"
                style={{ fontFamily: 'Tajawal, sans-serif', width: '100%' }}
                placeholder="Ø§ÙƒØªØ¨ ØªÙØ§ØµÙŠÙ„ Ø¯Ù‚ÙŠÙ‚Ø© Ø¹Ù† Ø³Ø¨Ø¨ Ø§Ù„Ø¥Ù„ØºØ§Ø¡ (Ø³ÙŠØªÙ… Ø£Ø±Ø´ÙØ© Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª)..."
              />
            </div>

            <InputWithCopy
              label="Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠ (Ø¥Ù† ÙˆØ¬Ø¯)"
              id="cancel-reference"
              value=""
              onChange={() => {}}
              placeholder="Ù…Ø«Ø§Ù„: Ø·Ù„Ø¨ Ø§Ù„Ø¥Ù„ØºØ§Ø¡ Ø±Ù‚Ù…..."
              copyable={false}
              clearable={true}
            />

            <div>
              <label style={{ fontSize: '13px', fontWeight: 600, color: '#374151', display: 'flex', alignItems: 'center', gap: '4px', marginBottom: '8px' }}>
                <Archive className="h-4 w-4" />
                Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø£Ø±Ø´ÙØ©
              </label>
              <EnhancedSwitch
                id="cancel-archive"
                checked={true}
                onCheckedChange={() => {}}
                label="Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙÙŠ Ø§Ù„Ø£Ø±Ø´ÙŠÙ"
                size="sm"
                variant="default"
              />
            </div>

            <div className="bg-gray-50 border border-gray-200 rounded-lg p-3">
              <p style={{ fontSize: '11px', color: '#6b7280', lineHeight: '1.6' }}>
                <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ù„ØºØ§Ø¡ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø§Ø¯Ø© ØªÙ†Ø´ÙŠØ· Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª Ù…Ù† Ø®Ù„Ø§Ù„ Ø²Ø± "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ†Ø´ÙŠØ·".
              </p>
            </div>
          </div>

          <DialogFooter style={{ borderTop: '2px solid #e5e7eb', paddingTop: '12px' }}>
            <Button variant="outline" onClick={() => setShowCancelDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥Ù„ØºØ§Ø¡
            </Button>
            <Button style={{ background: 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)' }}>
              <X className="h-4 w-4 ml-1" />
              ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ù„ØºØ§Ø¡
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* 6. Ù†Ø§ÙØ°Ø© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ†Ø´ÙŠØ· */}
      <Dialog open={showReactivateDialog} onOpenChange={setShowReactivateDialog}>
        <DialogContent className="max-w-2xl" style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}>
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontSize: '20px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{
                padding: '8px',
                background: 'linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%)',
                borderRadius: '10px'
              }}>
                <RefreshCw className="h-5 w-5" style={{ color: '#22c55e' }} />
              </div>
              Ø¥Ø¹Ø§Ø¯Ø© ØªÙ†Ø´ÙŠØ· Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© {currentTransaction?.number}
            </DialogTitle>
          </DialogHeader>

          <div className="space-y-4" style={{ padding: '20px 0' }}>
            <div className="bg-green-50 border-2 border-green-200 rounded-lg p-4">
              <div className="flex items-start gap-3">
                <CheckCircle className="h-5 w-5 text-green-600 mt-0.5" />
                <div>
                  <p style={{ fontSize: '13px', fontWeight: 600, color: '#14532d', marginBottom: '4px' }}>
                    Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ù…Ù„ØºØ§Ø©
                  </p>
                  <p style={{ fontSize: '12px', color: '#6b7280', lineHeight: '1.6' }}>
                    Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©: {currentTransaction?.number} â€¢ Ø§Ù„Ù…Ø§Ù„Ùƒ: {currentTransaction?.ownerName}
                    <br />
                    ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù„ØºØ§Ø¡: {currentTransaction?.statusDate} â€¢ Ø§Ù„Ø³Ø¨Ø¨: {currentTransaction?.statusReason}
                  </p>
                </div>
              </div>
            </div>

            <SelectWithCopy
              label="Ø³Ø¨Ø¨ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ†Ø´ÙŠØ· *"
              id="reactivate-reason"
              value=""
              onChange={() => {}}
              options={[
                { value: 'error', label: 'Ø¥Ù„ØºØ§Ø¡ Ø®Ø§Ø·Ø¦' },
                { value: 'owner-changed-mind', label: 'ØªØ±Ø§Ø¬Ø¹ Ø§Ù„Ù…Ø§Ù„Ùƒ Ø¹Ù† Ø§Ù„Ø¥Ù„ØºØ§Ø¡' },
                { value: 'issue-resolved', label: 'ØªÙ… Ø­Ù„ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©' },
                { value: 'new-agreement', label: 'Ø§ØªÙØ§Ù‚ Ø¬Ø¯ÙŠØ¯' },
                { value: 'other', label: 'Ø³Ø¨Ø¨ Ø¢Ø®Ø±' }
              ]}
              copyable={false}
              clearable={true}
            />

            <div>
              <label style={{ fontSize: '13px', fontWeight: 600, color: '#374151', display: 'block', marginBottom: '6px' }}>
                Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ†Ø´ÙŠØ· *
              </label>
              <textarea
                rows={4}
                className="input-field"
                style={{ fontFamily: 'Tajawal, sans-serif', width: '100%' }}
                placeholder="Ø§ÙƒØªØ¨ Ø³Ø¨Ø¨ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ†Ø´ÙŠØ· Ø¨Ø§Ù„ØªÙØµÙŠÙ„..."
              />
            </div>

            <SelectWithCopy
              label="Ø§Ù„Ø­Ø§Ù„Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†Ø´ÙŠØ·"
              id="reactivate-new-status"
              value="in-progress"
              onChange={() => {}}
              options={[
                { value: 'new', label: 'Ø¬Ø¯ÙŠØ¯Ø©' },
                { value: 'in-progress', label: 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©' },
                { value: 'pending-approval', label: 'ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©' }
              ]}
              copyable={false}
              clearable={false}
            />

            <div>
              <label style={{ fontSize: '13px', fontWeight: 600, color: '#374151', display: 'flex', alignItems: 'center', gap: '4px', marginBottom: '8px' }}>
                <Bell className="h-4 w-4" />
                Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
              </label>
              <div className="space-y-2">
                <EnhancedSwitch
                  id="reactivate-notify-owner"
                  checked={true}
                  onCheckedChange={() => {}}
                  label="Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø§Ù„Ùƒ Ø¨Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ†Ø´ÙŠØ·"
                  size="sm"
                  variant="success"
                />
                <EnhancedSwitch
                  id="reactivate-notify-team"
                  checked={true}
                  onCheckedChange={() => {}}
                  label="Ø¥Ø´Ø¹Ø§Ø± ÙØ±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„"
                  size="sm"
                  variant="success"
                />
              </div>
            </div>
          </div>

          <DialogFooter style={{ borderTop: '2px solid #e5e7eb', paddingTop: '12px' }}>
            <Button variant="outline" onClick={() => setShowReactivateDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥Ù„ØºØ§Ø¡
            </Button>
            <Button style={{ background: 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)' }}>
              <RefreshCw className="h-4 w-4 ml-1" />
              Ø¥Ø¹Ø§Ø¯Ø© ØªÙ†Ø´ÙŠØ·
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* 7. Ù†Ø§ÙØ°Ø© Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© */}
      <Dialog open={showCompleteTransactionDialog} onOpenChange={setShowCompleteTransactionDialog}>
        <DialogContent className="max-w-3xl" style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}>
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontSize: '20px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{
                padding: '8px',
                background: 'linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)',
                borderRadius: '10px'
              }}>
                <CheckCircle className="h-5 w-5" style={{ color: '#10b981' }} />
              </div>
              Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© {currentTransaction?.number}
            </DialogTitle>
          </DialogHeader>

          <div className="space-y-4" style={{ padding: '20px 0' }}>
            <div className="bg-emerald-50 border-2 border-emerald-200 rounded-lg p-4">
              <div className="flex items-start gap-3">
                <Award className="h-5 w-5 text-emerald-600 mt-0.5" />
                <div>
                  <p style={{ fontSize: '13px', fontWeight: 600, color: '#065f46', marginBottom: '4px' }}>
                    ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹Ù„Ù‰ ÙˆØ´Ùƒ Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„
                  </p>
                  <p style={{ fontSize: '12px', color: '#6b7280', lineHeight: '1.6' }}>
                    Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§ÙƒØªÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ù‚Ø¨Ù„ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹.
                  </p>
                </div>
              </div>
            </div>

            {/* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ­Ù‚Ù‚ */}
            <Card className="card-rtl" style={{ background: '#f8fafc', border: '1px solid #e5e7eb' }}>
              <CardHeader>
                <CardTitle style={{ fontSize: '14px' }}>
                  <ClipboardList className="h-4 w-4 inline ml-1" />
                  Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="space-y-2">
                  <div className="flex items-center gap-2">
                    <CheckCircle className="h-4 w-4 text-green-600" />
                    <span style={{ fontSize: '12px', color: '#1f2937' }}>Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ§Ø¨Ø§Øª Ù…ÙƒØªÙ…Ù„Ø© (39/39)</span>
                  </div>
                  <div className="flex items-center gap-2">
                    <CheckCircle className="h-4 w-4 text-green-600" />
                    <span style={{ fontSize: '12px', color: '#1f2937' }}>Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ù…ÙˆØ«Ù‚Ø© Ø±Ù‚Ù…ÙŠØ§Ù‹</span>
                  </div>
                  <div className="flex items-center gap-2">
                    <CheckCircle className="h-4 w-4 text-green-600" />
                    <span style={{ fontSize: '12px', color: '#1f2937' }}>Ø§Ù„Ø£ØªØ¹Ø§Ø¨ Ù…Ø³Ø¯Ø¯Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</span>
                  </div>
                  <div className="flex items-center gap-2">
                    <Clock className="h-4 w-4 text-yellow-600" />
                    <span style={{ fontSize: '12px', color: '#6b7280' }}>ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</span>
                  </div>
                </div>
              </CardContent>
            </Card>

            <div className="grid grid-cols-2 gap-4">
              <InputWithCopy
                label="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡"
                id="complete-date"
                value={new Date().toISOString().split('T')[0]}
                onChange={() => {}}
                type="date"
                copyable={false}
                clearable={false}
              />
              <InputWithCopy
                label="Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„ÙŠÙ… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ"
                id="complete-delivery-number"
                value=""
                onChange={() => {}}
                placeholder="DN-2025-001"
                copyable={false}
                clearable={true}
              />
            </div>

            <div>
              <label style={{ fontSize: '13px', fontWeight: 600, color: '#374151', display: 'block', marginBottom: '6px' }}>
                Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡
              </label>
              <textarea
                rows={3}
                className="input-field"
                style={{ fontFamily: 'Tajawal, sans-serif', width: '100%' }}
                placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ø¹Ù† Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©..."
              />
            </div>

            <div>
              <label style={{ fontSize: '13px', fontWeight: 600, color: '#374151', display: 'flex', alignItems: 'center', gap: '4px', marginBottom: '8px' }}>
                <Archive className="h-4 w-4" />
                Ø§Ù„Ø£Ø±Ø´ÙØ© ÙˆØ§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª
              </label>
              <div className="space-y-2">
                <EnhancedSwitch
                  id="complete-archive"
                  checked={true}
                  onCheckedChange={() => {}}
                  label="Ù†Ù‚Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ù„Ù„Ø£Ø±Ø´ÙŠÙ"
                  size="sm"
                  variant="success"
                />
                <EnhancedSwitch
                  id="complete-notify-owner"
                  checked={true}
                  onCheckedChange={() => {}}
                  label="Ø¥Ø±Ø³Ø§Ù„ Ø´Ù‡Ø§Ø¯Ø© Ø¥Ù†Ø¬Ø§Ø² Ù„Ù„Ù…Ø§Ù„Ùƒ"
                  size="sm"
                  variant="success"
                />
                <EnhancedSwitch
                  id="complete-generate-report"
                  checked={true}
                  onCheckedChange={() => {}}
                  label="Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ù†Ù‡Ø§Ø¦ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ"
                  size="sm"
                  variant="success"
                />
              </div>
            </div>
          </div>

          <DialogFooter style={{ borderTop: '2px solid #e5e7eb', paddingTop: '12px' }}>
            <Button variant="outline" onClick={() => setShowCompleteTransactionDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥Ù„ØºØ§Ø¡
            </Button>
            <Button style={{ background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)' }}>
              <CheckCircle className="h-4 w-4 ml-1" />
              Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* 8. Ù†Ø§ÙØ°Ø© Ø±ÙØ¹ Ù…Ù„ÙØ§Øª */}
      <Dialog open={showUploadFilesDialog} onOpenChange={setShowUploadFilesDialog}>
        <DialogContent className="max-w-4xl" style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}>
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontSize: '20px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{
                padding: '8px',
                background: 'linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)',
                borderRadius: '10px'
              }}>
                <Download className="h-5 w-5" style={{ color: '#a855f7', transform: 'rotate(180deg)' }} />
              </div>
              Ø±ÙØ¹ Ù…Ù„ÙØ§Øª Ù„Ù„Ù…Ø¹Ø§Ù…Ù„Ø© {currentTransaction?.number}
            </DialogTitle>
          </DialogHeader>

          <div className="grid grid-cols-2 gap-6" style={{ padding: '20px 0' }}>
            {/* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠÙ…Ù†: Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù„Ù */}
            <div>
              <h3 className="text-base mb-3" style={{ fontWeight: 700, color: '#1f2937' }}>
                <FileCheck className="h-4 w-4 inline ml-1" />
                Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù„Ù
              </h3>

              <div className="space-y-3">
                <SelectWithCopy
                  label="ØªØµÙ†ÙŠÙ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ *"
                  id="upload-category"
                  value=""
                  onChange={() => {}}
                  options={[
                    { value: 'drawing', label: 'Ø±Ø³ÙˆÙ…Ø§Øª Ù‡Ù†Ø¯Ø³ÙŠØ©' },
                    { value: 'license', label: 'ØªØ±Ø§Ø®ÙŠØµ' },
                    { value: 'contract', label: 'Ø¹Ù‚ÙˆØ¯' },
                    { value: 'invoice', label: 'ÙÙˆØ§ØªÙŠØ±' },
                    { value: 'report', label: 'ØªÙ‚Ø§Ø±ÙŠØ±' },
                    { value: 'photo', label: 'ØµÙˆØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹' },
                    { value: 'other', label: 'Ø£Ø®Ø±Ù‰' }
                  ]}
                  copyable={false}
                  clearable={true}
                />

                <InputWithCopy
                  label="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ†Ø¯"
                  id="upload-doc-name"
                  value=""
                  onChange={() => {}}
                  placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ù…Ø®Ø·Ø· Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ"
                  copyable={false}
                  clearable={true}
                />

                <div>
                  <label style={{ fontSize: '13px', fontWeight: 600, color: '#374151', display: 'block', marginBottom: '6px' }}>
                    ÙˆØµÙ Ø§Ù„Ù…Ø³ØªÙ†Ø¯
                  </label>
                  <textarea
                    rows={3}
                    className="input-field"
                    style={{ fontFamily: 'Tajawal, sans-serif', width: '100%' }}
                    placeholder="ÙˆØµÙ Ù…Ø®ØªØµØ± Ù„Ù„Ù…Ø³ØªÙ†Ø¯..."
                  />
                </div>

                <div>
                  <label style={{ fontSize: '13px', fontWeight: 600, color: '#374151', display: 'flex', alignItems: 'center', gap: '4px', marginBottom: '8px' }}>
                    <Shield className="h-4 w-4" />
                    Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                  </label>
                  <div className="space-y-2">
                    <EnhancedSwitch
                      id="upload-confidential"
                      checked={false}
                      onCheckedChange={() => {}}
                      label="Ù…Ø³ØªÙ†Ø¯ Ø³Ø±ÙŠ"
                      size="sm"
                      variant="warning"
                    />
                    <EnhancedSwitch
                      id="upload-require-signature"
                      checked={false}
                      onCheckedChange={() => {}}
                      label="ÙŠØªØ·Ù„Ø¨ ØªÙˆÙ‚ÙŠØ¹ Ø±Ù‚Ù…ÙŠ"
                      size="sm"
                      variant="default"
                    />
                  </div>
                </div>
              </div>
            </div>

            {/* Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙŠØ³Ø±: Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø±ÙØ¹ */}
            <div>
              <h3 className="text-base mb-3" style={{ fontWeight: 700, color: '#1f2937' }}>
                <FolderOpen className="h-4 w-4 inline ml-1" />
                Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„ÙØ§Øª
              </h3>

              <div 
                className="border-2 border-dashed border-purple-300 rounded-lg p-8 text-center mb-4"
                style={{ background: '#faf5ff', minHeight: '250px', display: 'flex', alignItems: 'center', justifyContent: 'center', flexDirection: 'column' }}
              >
                <div style={{
                  padding: '16px',
                  background: 'linear-gradient(135deg, #e9d5ff 0%, #d8b4fe 100%)',
                  borderRadius: '50%',
                  marginBottom: '16px'
                }}>
                  <Download className="h-12 w-12 text-purple-600" style={{ transform: 'rotate(180deg)' }} />
                </div>
                <p style={{ fontSize: '15px', fontWeight: 600, color: '#6b21a8', marginBottom: '8px' }}>
                  Ø§Ø³Ø­Ø¨ Ø§Ù„Ù…Ù„ÙØ§Øª Ù‡Ù†Ø§
                </p>
                <p style={{ fontSize: '12px', color: '#9ca3af', marginBottom: '16px' }}>
                  Ø£Ùˆ Ø§Ø¶ØºØ· Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„ÙØ§Øª Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ
                </p>
                <Button variant="outline" style={{ fontSize: '13px' }}>
                  <FolderOpen className="h-4 w-4 ml-1" />
                  ØªØµÙØ­ Ø§Ù„Ù…Ù„ÙØ§Øª
                </Button>
              </div>

              <div className="space-y-2">
                <div className="bg-purple-50 border border-purple-200 rounded-lg p-3">
                  <p style={{ fontSize: '11px', color: '#6b7280', lineHeight: '1.6' }}>
                    <strong>Ø§Ù„ØµÙŠØº Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©:</strong>
                    <br />
                    PDF, DOC, DOCX, XLS, XLSX, DWG, DXF, JPG, PNG, ZIP
                  </p>
                </div>
                <div className="bg-blue-50 border border-blue-200 rounded-lg p-3">
                  <p style={{ fontSize: '11px', color: '#6b7280', lineHeight: '1.6' }}>
                    <strong>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰:</strong> 50 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª Ù„ÙƒÙ„ Ù…Ù„Ù
                    <br />
                    <strong>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù„ÙØ§Øª:</strong> Ø­ØªÙ‰ 10 Ù…Ù„ÙØ§Øª ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø©
                  </p>
                </div>
              </div>
            </div>
          </div>

          <DialogFooter style={{ borderTop: '2px solid #e5e7eb', paddingTop: '12px' }}>
            <Button variant="outline" onClick={() => setShowUploadFilesDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥Ù„ØºØ§Ø¡
            </Button>
            <Button style={{ background: 'linear-gradient(135deg, #a855f7 0%, #9333ea 100%)' }}>
              <Download className="h-4 w-4 ml-1" style={{ transform: 'rotate(180deg)' }} />
              Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>

      {/* 9. Ù†Ø§ÙØ°Ø© Ù†Ù‚Ù„ Ø§Ù„Ù…Ù„ÙƒÙŠØ© */}
      <Dialog open={showTransferOwnershipDialog} onOpenChange={setShowTransferOwnershipDialog}>
        <DialogContent className="max-w-3xl" style={{ fontFamily: 'Tajawal, sans-serif', direction: 'rtl' }}>
          <DialogHeader style={{ borderBottom: '2px solid #e5e7eb', paddingBottom: '12px' }}>
            <DialogTitle style={{ fontSize: '20px', display: 'flex', alignItems: 'center', gap: '8px' }}>
              <div style={{
                padding: '8px',
                background: 'linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%)',
                borderRadius: '10px'
              }}>
                <UserPlus className="h-5 w-5" style={{ color: '#f97316' }} />
              </div>
              Ù†Ù‚Ù„ Ù…Ù„ÙƒÙŠØ© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© {currentTransaction?.number}
            </DialogTitle>
          </DialogHeader>

          <div className="space-y-4" style={{ padding: '20px 0' }}>
            <div className="bg-orange-50 border-2 border-orange-200 rounded-lg p-4">
              <div className="flex items-start gap-3">
                <AlertCircle className="h-5 w-5 text-orange-600 mt-0.5" />
                <div>
                  <p style={{ fontSize: '13px', fontWeight: 600, color: '#9a3412', marginBottom: '4px' }}>
                    ØªÙ†Ø¨ÙŠÙ‡: Ù†Ù‚Ù„ Ø§Ù„Ù…Ù„ÙƒÙŠØ©
                  </p>
                  <p style={{ fontSize: '12px', color: '#6b7280', lineHeight: '1.6' }}>
                    Ø³ÙŠØªÙ… Ù†Ù‚Ù„ Ù…Ù„ÙƒÙŠØ© Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ù…Ù† {currentTransaction?.ownerName} Ø¥Ù„Ù‰ Ø¹Ù…ÙŠÙ„ Ø¢Ø®Ø±.
                  </p>
                </div>
              </div>
            </div>

            {/* Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ */}
            <Card className="card-rtl" style={{ background: '#f8fafc', border: '1px solid #e5e7eb' }}>
              <CardHeader>
                <CardTitle style={{ fontSize: '14px' }}>
                  <User className="h-4 w-4 inline ml-1" />
                  Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="grid grid-cols-2 gap-3">
                  <div>
                    <span style={{ fontSize: '11px', color: '#6b7280' }}>Ø§Ù„Ø§Ø³Ù…:</span>
                    <p style={{ fontSize: '13px', fontWeight: 600, color: '#1f2937', marginTop: '2px' }}>
                      {currentTransaction?.ownerName}
                    </p>
                  </div>
                  <div>
                    <span style={{ fontSize: '11px', color: '#6b7280' }}>Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©:</span>
                    <p className="font-mono" style={{ fontSize: '13px', fontWeight: 600, color: '#1f2937', marginTop: '2px' }}>
                      {currentTransaction?.ownerId}
                    </p>
                  </div>
                  <div>
                    <span style={{ fontSize: '11px', color: '#6b7280' }}>Ø§Ù„Ø¬ÙˆØ§Ù„:</span>
                    <p className="font-mono" style={{ fontSize: '13px', fontWeight: 600, color: '#1f2937', marginTop: '2px' }}>
                      {currentTransaction?.ownerPhone}
                    </p>
                  </div>
                </div>
              </CardContent>
            </Card>

            {/* Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯ */}
            <div>
              <h3 className="text-base mb-3" style={{ fontWeight: 700, color: '#1f2937' }}>
                <UserPlus className="h-4 w-4 inline ml-1" />
                Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯
              </h3>

              <div className="space-y-3">
                <div className="grid grid-cols-2 gap-3">
                  <InputWithCopy
                    label="Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© *"
                    id="new-owner-id"
                    value=""
                    onChange={() => {}}
                    placeholder="1XXXXXXXXX"
                    copyable={false}
                    clearable={true}
                  />
                  <Button variant="outline" style={{ marginTop: '28px' }}>
                    <Search className="h-4 w-4 ml-1" />
                    Ø¨Ø­Ø«
                  </Button>
                </div>

                <InputWithCopy
                  label="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ *"
                  id="new-owner-name"
                  value=""
                  onChange={() => {}}
                  placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ"
                  copyable={false}
                  clearable={true}
                />

                <div className="grid grid-cols-2 gap-3">
                  <InputWithCopy
                    label="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ *"
                    id="new-owner-phone"
                    value=""
                    onChange={() => {}}
                    placeholder="05XXXXXXXX"
                    copyable={false}
                    clearable={true}
                  />
                  <InputWithCopy
                    label="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"
                    id="new-owner-email"
                    value=""
                    onChange={() => {}}
                    placeholder="email@example.com"
                    copyable={false}
                    clearable={true}
                  />
                </div>

                <InputWithCopy
                  label="Ø±Ù‚Ù… Ù…Ø³ØªÙ†Ø¯ Ø§Ù„Ù†Ù‚Ù„"
                  id="transfer-document-number"
                  value=""
                  onChange={() => {}}
                  placeholder="Ø±Ù‚Ù… ÙˆØ«ÙŠÙ‚Ø© Ù†Ù‚Ù„ Ø§Ù„Ù…Ù„ÙƒÙŠØ©"
                  copyable={false}
                  clearable={true}
                />

                <div>
                  <label style={{ fontSize: '13px', fontWeight: 600, color: '#374151', display: 'block', marginBottom: '6px' }}>
                    Ø³Ø¨Ø¨ Ø§Ù„Ù†Ù‚Ù„ *
                  </label>
                  <textarea
                    rows={3}
                    className="input-field"
                    style={{ fontFamily: 'Tajawal, sans-serif', width: '100%' }}
                    placeholder="Ø§Ø°ÙƒØ± Ø³Ø¨Ø¨ Ù†Ù‚Ù„ Ø§Ù„Ù…Ù„ÙƒÙŠØ©..."
                  />
                </div>

                <div>
                  <label style={{ fontSize: '13px', fontWeight: 600, color: '#374151', display: 'flex', alignItems: 'center', gap: '4px', marginBottom: '8px' }}>
                    <Bell className="h-4 w-4" />
                    Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
                  </label>
                  <div className="space-y-2">
                    <EnhancedSwitch
                      id="transfer-notify-old-owner"
                      checked={true}
                      onCheckedChange={() => {}}
                      label="Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ø³Ø§Ø¨Ù‚"
                      size="sm"
                      variant="warning"
                    />
                    <EnhancedSwitch
                      id="transfer-notify-new-owner"
                      checked={true}
                      onCheckedChange={() => {}}
                      label="Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø§Ù„Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯"
                      size="sm"
                      variant="success"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>

          <DialogFooter style={{ borderTop: '2px solid #e5e7eb', paddingTop: '12px' }}>
            <Button variant="outline" onClick={() => setShowTransferOwnershipDialog(false)}>
              <X className="h-4 w-4 ml-1" />
              Ø¥Ù„ØºØ§Ø¡
            </Button>
            <Button style={{ background: 'linear-gradient(135deg, #f97316 0%, #ea580c 100%)' }}>
              <UserPlus className="h-4 w-4 ml-1" />
              ØªØ£ÙƒÙŠØ¯ Ù†Ù‚Ù„ Ø§Ù„Ù…Ù„ÙƒÙŠØ©
            </Button>
          </DialogFooter>
        </DialogContent>
      </Dialog>
    </div>
  );
};

export default MainTransactionsScreen_Complete_284_v10;
